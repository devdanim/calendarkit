{"version":3,"sources":["../src/utils.ts","../src/components/ui/button.tsx","../src/hooks/useMediaQuery.ts","../src/components/CalendarHeader.tsx","../src/lib/date.ts","../src/components/MiniCalendar.tsx","../src/components/Sidebar.tsx","../src/components/dnd/DraggableEvent.tsx","../src/components/dnd/DroppableCell.tsx","../src/views/MonthView.tsx","../src/views/WeekView.tsx","../src/views/DayView.tsx","../src/views/AgendaView.tsx","../src/views/ResourceView.tsx","../src/components/Skeleton.tsx","../src/components/ContextMenu.tsx","../src/lib/theme.ts","../src/hooks/useCalendarLogic.ts","../src/hooks/useSwipeGesture.ts","../src/index.tsx"],"names":["twMerge","clsx","cva","React","useState","useEffect","useRef","CalendarDays","CalendarRange","Calendar","ListTodo","Menu","format","CalendarCheck","ChevronLeft","ChevronRight","Sun","Moon","startOfDay","startOfMonth","endOfMonth","startOfWeek","endOfWeek","eachDayOfInterval","addDays","subMonths","addMonths","isSameDay","isSameMonth","isToday","toZonedTime","ChevronDown","Globe","useDraggable","CSS","useDroppable","useMemo","useCallback","differenceInMinutes","isTomorrow","motion","Clock","Users","Paperclip","Bell","_","Edit3","Copy","Trash2","AnimatePresence","subWeeks","subDays","addWeeks","differenceInMilliseconds","fromZonedTime","useSensors","useSensor","PointerSensor","createSnapModifier","modifiers","restrictToWindowEdges","useId","DndContext","DragOverlay"],"mappings":"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","file":"index.js","sourcesContent":["import { clsx, type ClassValue } from 'clsx';\nimport { twMerge } from 'tailwind-merge';\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n","import * as React from 'react';\nimport { cva, type VariantProps } from 'class-variance-authority';\nimport { cn } from '../../utils';\n\nconst buttonVariants = cva(\n  'inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50',\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive: 'bg-destructive text-destructive-foreground hover:bg-destructive/90',\n        outline: 'border border-input bg-background hover:bg-accent hover:text-accent-foreground',\n        secondary: 'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost: 'hover:bg-accent hover:text-accent-foreground',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-10 px-4 py-2',\n        sm: 'h-9 rounded-md px-3',\n        lg: 'h-11 rounded-md px-8',\n        icon: 'h-10 w-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  }\n);\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>, VariantProps<typeof buttonVariants> {}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, ...props }, ref) => {\n    return (\n      <button className={cn(buttonVariants({ variant, size, className }))} ref={ref} {...props} />\n    );\n  }\n);\nButton.displayName = 'Button';\n\nexport { Button, buttonVariants };\n","import { useState, useEffect, useRef, RefObject } from 'react';\n\nexport const WIDE_HEADER_MIN_WIDTH = 768; // px  below = compact (icons only)\n\n/**\n * Returns true when the observed container width is >= WIDE_HEADER_MIN_WIDTH.\n * Uses ResizeObserver so the header adapts to its actual container (e.g. modal,\n * narrow column), not the viewport  labels only when there is enough space.\n */\nexport function useIsWideHeader(containerRef: RefObject<HTMLElement | null>): boolean {\n  const [isWide, setIsWide] = useState(false);\n\n  useEffect(() => {\n    const el = containerRef.current;\n    if (!el || typeof ResizeObserver === 'undefined') return;\n\n    const ro = new ResizeObserver(() => {\n      setIsWide(el.getBoundingClientRect().width >= WIDE_HEADER_MIN_WIDTH);\n    });\n    ro.observe(el);\n    setIsWide(el.getBoundingClientRect().width >= WIDE_HEADER_MIN_WIDTH);\n    return () => ro.disconnect();\n  }, [containerRef]);\n\n  return isWide;\n}\n","import React, { useRef } from 'react';\nimport { format, Locale } from 'date-fns';\nimport { Button } from './ui/button';\nimport {\n  ChevronLeft,\n  ChevronRight,\n  Menu,\n  Moon,\n  Sun,\n  CalendarDays,\n  CalendarRange,\n  Calendar,\n  ListTodo,\n  CalendarCheck,\n} from 'lucide-react';\nimport { ViewType } from '../types';\nimport { cn } from '../utils';\nimport { useIsWideHeader } from '../hooks/useMediaQuery';\n\ninterface CalendarHeaderProps {\n  currentDate: Date;\n  onPrev: () => void;\n  onNext: () => void;\n  onToday: () => void;\n  view: ViewType;\n  onViewChange: (view: ViewType) => void;\n  onMenuClick?: () => void;\n  isDarkMode?: boolean;\n  onThemeToggle?: () => void;\n  translations: Record<string, string>;\n  hideViewSwitcher?: boolean;\n  hideLanguageSelector?: boolean;\n  hideDarkModeToggle?: boolean;\n  language?: 'en' | 'fr';\n  onLanguageChange?: (lang: 'en' | 'fr') => void;\n  locale?: Locale;\n  newEventButton?: {\n    label?: string;\n    icon?: React.ReactNode;\n    onClick?: () => void;\n  };\n}\n\nexport const CalendarHeader: React.FC<CalendarHeaderProps> = ({\n  currentDate,\n  onPrev,\n  onNext,\n  onToday,\n  view,\n  onViewChange,\n  onMenuClick,\n  isDarkMode,\n  onThemeToggle,\n  translations,\n  hideViewSwitcher,\n  hideLanguageSelector,\n  hideDarkModeToggle,\n  language,\n  onLanguageChange,\n  locale,\n  newEventButton,\n}) => {\n  const headerRef = useRef<HTMLDivElement>(null);\n  const isWide = useIsWideHeader(headerRef);\n\n  const viewConfig = [\n    {\n      key: 'month',\n      icon: CalendarDays,\n    },\n    {\n      key: 'week',\n      icon: CalendarRange,\n    },\n    {\n      key: 'day',\n      icon: Calendar,\n    },\n    {\n      key: 'agenda',\n      icon: ListTodo,\n    },\n  ] as const;\n\n  return (\n    <div\n      ref={headerRef}\n      className=\"flex min-h-[64px] flex-col items-center justify-between gap-3 border-b-[0px] border-border/50 bg-[#F9F9FB] px-3 py-3 md:flex-row md:gap-0 md:px-5\"\n    >\n      {/* Left Section: Menu, Navigation, Title */}\n      <div className=\"flex w-full items-center justify-between gap-2 md:w-auto md:justify-start\">\n        <div className=\"flex items-center gap-2 md:gap-3\">\n          {/* Menu Button - hidden in reduced view (sidebar hidden), visible when wide */}\n          {isWide && (\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              className=\"h-10 w-10 rounded-xl text-muted-foreground transition-all duration-200 hover:bg-accent/80 hover:text-foreground\"\n              onClick={onMenuClick}\n            >\n              <Menu className=\"h-5 w-5\" />\n            </Button>\n          )}\n\n          {/* Current Date Display */}\n          <div className=\"ml-2 md:ml-4\">\n            <h2 className=\"whitespace-nowrap text-lg font-semibold capitalize tracking-tight text-foreground md:text-xl\">\n              {format(currentDate, 'MMMM yyyy', { locale })}\n            </h2>\n          </div>\n\n          {/* Today Button - icon only in reduced view, label when wide */}\n          <Button\n            variant=\"outline\"\n            size=\"icon\"\n            onClick={onToday}\n            title={translations.today}\n            className={cn(\n              'h-9 w-9 shrink-0 rounded-xl border-[0.5px] border-border/60 bg-[#EEEFF5] text-sm font-medium transition-all duration-200 hover:border-primary/40 hover:bg-primary/5 hover:text-primary',\n              isWide && 'w-auto px-4 pl-3 [&>svg]:mr-2'\n            )}\n          >\n            <CalendarCheck className=\"h-4 w-4\" />\n            {isWide && <span>{translations.today}</span>}\n          </Button>\n\n          {/* Navigation Arrows */}\n          <div className=\"flex items-center rounded-xl bg-muted/40 p-0.5\">\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              onClick={onPrev}\n              className=\"h-8 w-8 rounded-lg transition-all duration-200 hover:bg-background/80\"\n            >\n              <ChevronLeft className=\"h-4 w-4 text-muted-foreground\" />\n            </Button>\n            <Button\n              variant=\"ghost\"\n              size=\"icon\"\n              onClick={onNext}\n              className=\"h-8 w-8 rounded-lg transition-all duration-200 hover:bg-background/80\"\n            >\n              <ChevronRight className=\"h-4 w-4 text-muted-foreground\" />\n            </Button>\n          </div>\n        </div>\n      </div>\n\n      {/* Right Section: View Switcher & Theme Toggle */}\n      <div className=\"flex w-full items-center justify-end gap-2 md:w-auto md:gap-3\">\n        {/* Language Toggle */}\n        {!hideLanguageSelector && onLanguageChange && language && (\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={() => onLanguageChange(language === 'en' ? 'fr' : 'en')}\n            className=\"h-9 rounded-xl px-3 text-xs font-semibold uppercase tracking-wider text-muted-foreground transition-all duration-200 hover:bg-accent/80 hover:text-foreground\"\n          >\n            {language}\n          </Button>\n        )}\n\n        {/* Theme Toggle */}\n        {!hideDarkModeToggle && onThemeToggle && (\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            className=\"h-9 w-9 rounded-xl transition-all duration-200 hover:bg-accent/80\"\n            onClick={onThemeToggle}\n          >\n            {isDarkMode ? (\n              <Sun className=\"h-4 w-4 text-amber-500\" />\n            ) : (\n              <Moon className=\"h-4 w-4 text-muted-foreground\" />\n            )}\n          </Button>\n        )}\n\n        {/* View Switcher */}\n        {!hideViewSwitcher && (\n          <div className=\"flex items-center rounded-xl bg-[#EEEFF5] p-1 backdrop-blur-sm\">\n            {viewConfig.map(({ key, icon: Icon }) => (\n              <Button\n                key={key}\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={() => onViewChange(key)}\n                title={translations[key]}\n                className={cn(\n                  'h-8 gap-1.5 rounded-lg px-2 text-xs transition-all duration-200',\n                  isWide && 'px-3',\n                  view === key\n                    ? 'bg-white font-medium text-black shadow-sm'\n                    : 'text-[#4C4C56] hover:bg-[#EEEFF5] hover:text-foreground'\n                )}\n              >\n                <Icon className=\"h-3.5 w-3.5 shrink-0\" />\n                {isWide && <span>{translations[key]}</span>}\n              </Button>\n            ))}\n          </div>\n        )}\n\n        {/* New Event Button - icon only in reduced view, label when wide */}\n        {newEventButton && (\n          <Button\n            variant=\"outline\"\n            size=\"icon\"\n            title={newEventButton.label}\n            className={cn(\n              'h-9 w-9 shrink-0 rounded-xl border-none bg-[#7FDDF0] text-sm font-medium transition-all duration-200 hover:bg-primary/5 hover:text-primary',\n              isWide && 'w-auto px-5 [&>svg]:mr-2'\n            )}\n            onClick={newEventButton.onClick}\n          >\n            {newEventButton.icon}\n            {isWide && <span>{newEventButton.label}</span>}\n          </Button>\n        )}\n      </div>\n    </div>\n  );\n};\n","import {\n  startOfMonth,\n  endOfMonth,\n  startOfWeek,\n  endOfWeek,\n  startOfDay,\n  eachDayOfInterval,\n  isSameMonth,\n  isSameDay,\n  isToday,\n  format,\n  addMonths,\n  subMonths,\n  addWeeks,\n  subWeeks,\n  addDays as addDaysFns,\n  subDays,\n} from 'date-fns';\n\n/** True if the cell is day-level (midnight); false if it's a time slot. */\nexport function isDayCell(date: Date): boolean {\n  return date.getHours() === 0 && date.getMinutes() === 0;\n}\n\n/** Cell is in the past: before today for day cells, before now for time slots. */\nexport function isPastDate(date: Date): boolean {\n  const now = new Date();\n  if (isDayCell(date)) {\n    return startOfDay(date) < startOfDay(now);\n  }\n  return date.getTime() < now.getTime();\n}\n\nexport const getMonthGrid = (date: Date, weekStartOn: 0 | 1 | 2 | 3 | 4 | 5 | 6 = 0): Date[] => {\n  const monthStart = startOfMonth(date);\n  const monthEnd = endOfMonth(monthStart);\n\n  const startDate = startOfWeek(monthStart, { weekStartsOn: weekStartOn });\n  const endDate = endOfWeek(monthEnd, { weekStartsOn: weekStartOn });\n\n  return eachDayOfInterval({\n    start: startDate,\n    end: endDate,\n  });\n};\n\nexport const getWeekDays = (date: Date, weekStartOn: 0 | 1 | 2 | 3 | 4 | 5 | 6 = 0): Date[] => {\n  const start = startOfWeek(date, { weekStartsOn: weekStartOn });\n  const end = endOfWeek(date, { weekStartsOn: weekStartOn });\n  return eachDayOfInterval({ start, end });\n};\n\nexport {\n  startOfMonth,\n  endOfMonth,\n  startOfWeek,\n  endOfWeek,\n  isSameMonth,\n  isSameDay,\n  isToday,\n  format,\n  addMonths,\n  subMonths,\n  addWeeks,\n  subWeeks,\n  addDaysFns,\n  subDays,\n};\n","import React from 'react';\nimport {\n  format,\n  isSameMonth,\n  isSameDay,\n  isToday,\n  addMonths,\n  subMonths,\n  startOfWeek,\n  addDays,\n} from 'date-fns';\nimport { Locale } from 'date-fns';\nimport { getMonthGrid } from '../lib/date';\nimport { Button } from './ui/button';\nimport { ChevronLeft, ChevronRight } from 'lucide-react';\nimport { cn } from '../utils';\n\nimport { ViewType } from '../types';\n\ninterface MiniCalendarProps {\n  currentDate: Date;\n  onDateChange: (date: Date) => void;\n  onViewChange?: (view: ViewType) => void;\n  className?: string;\n  locale?: Locale;\n}\n\nexport const MiniCalendar: React.FC<MiniCalendarProps> = ({\n  currentDate,\n  onDateChange,\n  onViewChange,\n  className,\n  locale,\n}) => {\n  const [viewDate, setViewDate] = React.useState(currentDate);\n\n  // Sync viewDate with currentDate when it changes externally\n  React.useEffect(() => {\n    setViewDate(currentDate);\n  }, [currentDate]);\n\n  const days = React.useMemo(() => getMonthGrid(viewDate), [viewDate]);\n\n  // Generate weekday headers based on locale\n  const weekDays = React.useMemo(() => {\n    const start = startOfWeek(new Date(), { locale });\n    return Array.from(\n      {\n        length: 7,\n      },\n      (_, i) => format(addDays(start, i), 'EEEEE', { locale })\n    );\n  }, [locale]);\n\n  const handlePrev = () => {\n    const newDate = subMonths(viewDate, 1);\n    setViewDate(newDate);\n    // Optional: if user wants to sync main calendar on arrow click, uncomment:\n    onDateChange(newDate);\n    if (onViewChange) onViewChange('month');\n  };\n\n  const handleNext = () => {\n    const newDate = addMonths(viewDate, 1);\n    setViewDate(newDate);\n    // Optional: if user wants to sync main calendar on arrow click, uncomment:\n    onDateChange(newDate);\n    if (onViewChange) onViewChange('month');\n  };\n\n  const handleDateClick = (day: Date) => {\n    onDateChange(day);\n    if (onViewChange) onViewChange('day');\n  };\n\n  return (\n    <div className={cn('w-[260px] px-4', className)}>\n      {/* Header */}\n      <div className=\"mb-4 flex items-center justify-between\">\n        <span className=\"text-sm font-semibold capitalize text-foreground\">\n          {format(viewDate, 'MMMM yyyy', { locale })}\n        </span>\n        <div className=\"flex items-center rounded-lg bg-muted/40 p-0.5\">\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            className=\"h-7 w-7 rounded-md transition-all hover:bg-background/80\"\n            onClick={handlePrev}\n            aria-label=\"Previous month\"\n          >\n            <ChevronLeft className=\"h-4 w-4\" />\n          </Button>\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            className=\"h-7 w-7 rounded-md transition-all hover:bg-background/80\"\n            onClick={handleNext}\n            aria-label=\"Next month\"\n          >\n            <ChevronRight className=\"h-4 w-4\" />\n          </Button>\n        </div>\n      </div>\n\n      {/* Weekday Headers */}\n      <div className=\"mb-2 grid grid-cols-7 gap-y-2 text-center\">\n        {weekDays.map((day, i) => (\n          <div\n            key={`${day}-${i}`}\n            className=\"text-[10px] font-semibold uppercase text-muted-foreground/70\"\n          >\n            {day}\n          </div>\n        ))}\n      </div>\n\n      {/* Days Grid */}\n      <div className=\"grid grid-cols-7 gap-y-1 text-center\">\n        {days.map((day) => {\n          const isSelected = isSameDay(day, currentDate);\n          const isCurrentMonth = isSameMonth(day, viewDate);\n          const isTodayDate = isToday(day);\n\n          return (\n            <button\n              key={day.toISOString()}\n              onClick={() => handleDateClick(day)}\n              className={cn(\n                'mx-auto flex h-8 w-8 items-center justify-center rounded-full text-xs font-medium transition-all duration-200',\n                !isCurrentMonth && 'text-muted-foreground/30',\n                isCurrentMonth &&\n                  !isSelected &&\n                  !isTodayDate &&\n                  'text-foreground hover:bg-accent/80',\n                isSelected && 'scale-105 bg-[#DAF9FF] text-primary',\n                !isSelected && isTodayDate && 'bg-primary text-white'\n              )}\n            >\n              {format(day, 'd', { locale })}\n            </button>\n          );\n        })}\n      </div>\n    </div>\n  );\n};\n","import React, { useState, useEffect } from 'react';\nimport { ChevronDown, Globe } from 'lucide-react';\nimport { MiniCalendar } from './MiniCalendar';\nimport { cn } from '../utils';\nimport { toZonedTime } from 'date-fns-tz';\nimport { format, Locale } from 'date-fns';\n\nimport { ViewType, CalendarEvent, CalendarFilterItem, CalendarFilterSection } from '../types';\n\ninterface SidebarProps {\n  currentDate: Date;\n  onDateChange: (date: Date) => void;\n  onViewChange?: (view: ViewType) => void;\n  timezone?: string;\n  onTimezoneChange?: (timezone: string) => void;\n  className?: string;\n  calendars?: CalendarFilterItem[] | CalendarFilterSection[];\n  onCalendarToggle?: (calendarId: string, active: boolean) => void;\n  translations?: Record<string, string>;\n  events?: CalendarEvent[];\n  onImport?: (events: Partial<CalendarEvent>[]) => void;\n  /** Show/hide the mini calendar (default: true) */\n  showMiniCalendar?: boolean;\n  /** Show/hide the calendar filters (default: true) */\n  showCalendarFilters?: boolean;\n  /** Show/hide the timezone selector (default: true) */\n  showTimezoneSelector?: boolean;\n  /** Date-fns locale for formatting */\n  locale?: Locale;\n}\n\n/**\n * Helper to determine if calendars prop is using the new section format\n */\nfunction isFilterSectionArray(\n  calendars: CalendarFilterItem[] | CalendarFilterSection[]\n): calendars is CalendarFilterSection[] {\n  if (!calendars || calendars.length === 0) return false;\n  // Check if first item has 'items' property (section format)\n  return 'items' in calendars[0];\n}\n\n/**\n * Normalize calendars to section format for consistent rendering\n */\nfunction normalizeToSections(\n  calendars: CalendarFilterItem[] | CalendarFilterSection[] | undefined,\n  defaultTitle: string\n): CalendarFilterSection[] {\n  if (!calendars || calendars.length === 0) {\n    // Return default demo data as a section\n    return [\n      {\n        id: 'default',\n        title: defaultTitle,\n        items: [\n          { id: '1', label: 'My Calendar', color: '#3b82f6', active: true },\n          { id: '2', label: 'Birthdays', color: '#10b981', active: true },\n          { id: '3', label: 'Tasks', color: '#6366f1', active: true },\n        ],\n      },\n    ];\n  }\n\n  if (isFilterSectionArray(calendars)) {\n    return calendars;\n  }\n\n  // Convert flat array to single section\n  return [\n    {\n      id: 'default',\n      title: defaultTitle,\n      items: calendars,\n    },\n  ];\n}\n\nexport const Sidebar: React.FC<SidebarProps> = ({\n  currentDate,\n  onDateChange,\n  onViewChange,\n  timezone,\n  onTimezoneChange,\n  className,\n  calendars,\n  onCalendarToggle,\n  translations,\n  showMiniCalendar = true,\n  showCalendarFilters = true,\n  showTimezoneSelector = true,\n  locale,\n}) => {\n  const [timezoneOpen, setTimezoneOpen] = useState(false);\n  const [now, setNow] = useState<Date | null>(null);\n  const [hasMounted, setHasMounted] = useState(false);\n\n  // Normalize calendars to sections format\n  const filterSections = normalizeToSections(calendars, translations?.calendars || 'Calendars');\n\n  // Track collapsed state for each section\n  const [collapsedSections, setCollapsedSections] = useState<Record<string, boolean>>(() => {\n    const initial: Record<string, boolean> = {};\n    filterSections.forEach((section) => {\n      initial[section.id] = section.collapsed ?? false;\n    });\n    return initial;\n  });\n\n  const toggleSection = (sectionId: string) => {\n    setCollapsedSections((prev) => ({\n      ...prev,\n      [sectionId]: !prev[sectionId],\n    }));\n  };\n\n  // Only run on client to prevent hydration mismatch\n  useEffect(() => {\n    const initializeTime = () => {\n      setHasMounted(true);\n      setNow(new Date());\n    };\n    // Use setTimeout to avoid synchronous setState warning\n    const initTimer = setTimeout(initializeTime, 0);\n    const timer = setInterval(() => setNow(new Date()), 60000);\n    return () => {\n      clearTimeout(initTimer);\n      clearInterval(timer);\n    };\n  }, []);\n\n  const getAcronym = (tz: string) => {\n    if (!tz || !now) return 'LOC';\n    try {\n      return (\n        new Intl.DateTimeFormat('en-US', { timeZone: tz, timeZoneName: 'short' })\n          .formatToParts(now)\n          .find((part) => part.type === 'timeZoneName')?.value || ''\n      );\n    } catch {\n      return '';\n    }\n  };\n\n  const timezones = [\n    { value: '', label: 'Local Time', acronym: 'LOC' },\n    { value: 'UTC', label: 'UTC', acronym: 'UTC' },\n    { value: 'America/New_York', label: 'New York', acronym: 'EST' },\n    { value: 'America/Chicago', label: 'Chicago', acronym: 'CST' },\n    { value: 'America/Denver', label: 'Denver', acronym: 'MST' },\n    { value: 'America/Los_Angeles', label: 'Los Angeles', acronym: 'PST' },\n    { value: 'Europe/London', label: 'London', acronym: 'GMT' },\n    { value: 'Europe/Paris', label: 'Paris', acronym: 'CET' },\n    { value: 'Europe/Berlin', label: 'Berlin', acronym: 'CET' },\n    { value: 'Asia/Dubai', label: 'Dubai', acronym: 'GST' },\n    { value: 'Asia/Tokyo', label: 'Tokyo', acronym: 'JST' },\n    { value: 'Asia/Singapore', label: 'Singapore', acronym: 'SGT' },\n    { value: 'Australia/Sydney', label: 'Sydney', acronym: 'AEDT' },\n  ];\n\n  // Format label with time: HH:MM (ACR)\n  const formatTzLabel = (\n    tz: { value: string; label: string; acronym: string },\n    showTime: boolean = true\n  ) => {\n    // Don't show time if not mounted yet (SSR) to prevent hydration mismatch\n    if (!hasMounted || !now || !showTime) {\n      return <span>{tz.label}</span>;\n    }\n\n    let time = '';\n    let acronym = tz.acronym;\n\n    try {\n      if (!tz.value) {\n        time = format(now, 'HH:mm');\n        // Try to get real local acronym\n        try {\n          acronym =\n            new Intl.DateTimeFormat('en-US', { timeZoneName: 'short' })\n              .formatToParts(now)\n              .find((part) => part.type === 'timeZoneName')?.value || 'LOC';\n        } catch {}\n      } else {\n        const zDate = toZonedTime(now, tz.value);\n        time = format(zDate, 'HH:mm');\n        // Calculate dynamic acronym if needed (e.g. DST changes)\n        const dynAcronym = getAcronym(tz.value);\n        if (dynAcronym && !dynAcronym.includes('GMT') && !dynAcronym.includes('Time')) {\n          acronym = dynAcronym;\n        }\n      }\n    } catch {\n      return <span>{tz.label}</span>;\n    }\n\n    return (\n      <div className=\"flex w-full justify-between\">\n        <span>{tz.label}</span>\n        <span className=\"ml-2 tabular-nums text-muted-foreground\">\n          {time} <span className=\"text-xs opacity-75\">({acronym})</span>\n        </span>\n      </div>\n    );\n  };\n\n  const selectedTzObj = timezones.find((t) => t.value === (timezone || ''));\n  const selectedTimezoneLabel = selectedTzObj\n    ? formatTzLabel(selectedTzObj)\n    : translations?.localTime || 'Local Time';\n\n  return (\n    <div\n      className={cn(\n        'scrollbar-hide flex h-full min-w-[256px] flex-col overflow-y-auto overflow-x-hidden rounded-2xl border-1 border-[#E4E4EB] bg-white pb-4 pt-4 shadow-md',\n        className\n      )}\n    >\n      {showMiniCalendar && (\n        <MiniCalendar\n          currentDate={currentDate}\n          onDateChange={onDateChange}\n          onViewChange={onViewChange}\n          locale={locale}\n        />\n      )}\n\n      <div className={cn('flex-1 space-y-4 px-4', showMiniCalendar ? 'mt-5' : 'mt-0')}>\n        {/* Filter Sections */}\n        {showCalendarFilters &&\n          filterSections.map((section) => {\n            const isCollapsed = collapsedSections[section.id] ?? false;\n\n            return (\n              <div\n                key={section.id}\n                className=\"rounded-2xl border-[0px] border-border/30 bg-muted/20 p-3\"\n              >\n                {section.title && (\n                  <div\n                    className=\"-m-1 mb-2 flex cursor-pointer items-center justify-between rounded-xl p-2 transition-all duration-200 hover:bg-accent/50\"\n                    onClick={() => toggleSection(section.id)}\n                  >\n                    <span className=\"text-sm font-semibold text-foreground\">{section.title}</span>\n                    <ChevronDown\n                      className={cn(\n                        'h-4 w-4 text-muted-foreground transition-transform duration-200',\n                        !isCollapsed && 'rotate-180'\n                      )}\n                    />\n                  </div>\n                )}\n                {!isCollapsed && (\n                  <div className=\"space-y-1\">\n                    {section.items.map((item) => (\n                      <div\n                        key={item.id}\n                        className=\"group flex cursor-pointer items-center gap-3 rounded-xl px-2 py-2 transition-all duration-200 hover:bg-accent/60\"\n                        onClick={() => onCalendarToggle?.(item.id, !(item.active ?? true))}\n                      >\n                        <div className=\"relative flex items-center justify-center\">\n                          <input\n                            type=\"checkbox\"\n                            checked={item.active ?? true}\n                            onChange={(e) => {\n                              e.stopPropagation();\n                              onCalendarToggle?.(item.id, e.target.checked);\n                            }}\n                            className=\"peer h-5 w-5 cursor-pointer appearance-none rounded-md border-2 border-border/60 transition-all duration-200 checked:border-transparent\"\n                            style={{ '--primary-color': item.color } as React.CSSProperties}\n                            data-cal-id={item.id}\n                          />\n                          <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center opacity-0 transition-opacity peer-checked:opacity-100\">\n                            <svg\n                              className=\"h-3.5 w-3.5 text-white\"\n                              fill=\"none\"\n                              viewBox=\"0 0 24 24\"\n                              stroke=\"currentColor\"\n                              strokeWidth={3}\n                            >\n                              <path\n                                strokeLinecap=\"round\"\n                                strokeLinejoin=\"round\"\n                                d=\"M5 13l4 4L19 7\"\n                              />\n                            </svg>\n                          </div>\n                          <style>{`\n                          input[type=\"checkbox\"][data-cal-id=\"${item.id}\"]:checked {\n                            background-color: ${item.color} !important;\n                            border-color: ${item.color} !important;\n                          }\n                          input[type=\"checkbox\"][data-cal-id=\"${item.id}\"]:focus {\n                            --tw-ring-color: ${item.color}40 !important;\n                          }\n                        `}</style>\n                        </div>\n                        <div className=\"flex min-w-0 flex-1 items-center gap-2\">\n                          {item?.icon}\n                          <span className=\"break-words text-sm font-medium text-foreground/90\">\n                            {item.label}\n                          </span>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </div>\n            );\n          })}\n      </div>\n\n      {/* Timezone Selector - Custom UI */}\n      {showTimezoneSelector && (\n        <div className=\"mt-auto px-4 pt-5\">\n          <div className=\"rounded-2xl bg-muted/20 p-3\">\n            <div className=\"mb-3 flex items-center gap-2\">\n              <div className=\"rounded-lg bg-primary/10 p-1.5\">\n                <Globe className=\"h-4 w-4 text-primary\" />\n              </div>\n              <span className=\"text-sm font-semibold text-foreground\">\n                {translations?.timezone || 'Timezone'}\n              </span>\n            </div>\n\n            <div className=\"relative\">\n              <button\n                onClick={() => setTimezoneOpen(!timezoneOpen)}\n                className=\"flex w-full items-center justify-between rounded-xl bg-blue-200/40 py-2.5 pl-4 pr-3 text-left text-sm text-foreground transition-all duration-200 hover:bg-blue-200/80 focus:border-primary/50 focus:outline-none focus:ring-2 focus:ring-primary/20\"\n              >\n                <div className=\"mr-2 flex-1 truncate font-medium\">{selectedTimezoneLabel}</div>\n                <ChevronDown\n                  className={cn(\n                    'h-4 w-4 text-muted-foreground transition-transform duration-200',\n                    timezoneOpen && 'rotate-180'\n                  )}\n                />\n              </button>\n\n              {timezoneOpen && (\n                <>\n                  <div className=\"fixed inset-0 z-40\" onClick={() => setTimezoneOpen(false)} />\n                  <div className=\"animate-in fade-in zoom-in-95 absolute bottom-full left-0 z-50 mb-2 max-h-[260px] w-full overflow-y-auto rounded-xl bg-background p-1.5 shadow-2xl backdrop-blur-none duration-200\">\n                    {timezones.map((tz) => (\n                      <div\n                        key={tz.value}\n                        className={cn(\n                          'cursor-pointer rounded-lg px-3 py-2.5 text-sm transition-all duration-200',\n                          (timezone || '') === tz.value\n                            ? 'bg-primary font-semibold text-primary-foreground'\n                            : 'text-foreground hover:bg-accent/80'\n                        )}\n                        onClick={() => {\n                          onTimezoneChange?.(tz.value);\n                          setTimezoneOpen(false);\n                        }}\n                      >\n                        {formatTzLabel(tz)}\n                      </div>\n                    ))}\n                  </div>\n                </>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n","import React from 'react';\nimport { useDraggable } from '@dnd-kit/core';\nimport { CSS } from '@dnd-kit/utilities';\nimport { CalendarEvent } from '../../types';\nimport { cn } from '../../utils';\n\ninterface DraggableEventProps extends React.HTMLAttributes<HTMLDivElement> {\n  event: CalendarEvent;\n  children: React.ReactNode;\n}\n\nexport const DraggableEvent: React.FC<DraggableEventProps> = ({\n  event,\n  children,\n  className,\n  style: propStyle,\n  ...props\n}) => {\n  const { attributes, listeners, setNodeRef, transform, isDragging } = useDraggable({\n    id: event.id,\n    data: { event },\n  });\n\n  const style = {\n    ...propStyle,\n    transform: CSS.Translate.toString(transform),\n    zIndex: isDragging ? 100 : propStyle?.zIndex,\n    // When dragging, we want the ORIGINAL element to be almost invisible (or fully invisible)\n    // so that the DragOverlay (the \"ghost\") is the only thing the user focuses on.\n    // If we set opacity: 0, it disappears. If 0.1, it's a faint placeholder.\n    // The user asked for \"Make the entire dragged item transparent\".\n    // Usually this means the original item should be faded out while the drag overlay is moving.\n    opacity: isDragging ? 0 : propStyle?.opacity, // Hiding original element completely\n  };\n\n  return (\n    <div\n      ref={setNodeRef}\n      style={style}\n      {...listeners}\n      {...attributes}\n      {...props}\n      className={cn('touch-none', className)}\n    >\n      {children}\n    </div>\n  );\n};\n","import React from 'react';\nimport { useDroppable } from '@dnd-kit/core';\nimport { cn } from '../../utils';\nimport { isPastDate } from '../../lib/date';\n\ninterface DroppableCellProps {\n  id: string; // usually ISO date string\n  date: Date;\n  resourceId?: string;\n  children?: React.ReactNode;\n  className?: string;\n  style?: React.CSSProperties;\n  onClick?: () => void;\n}\n\nexport const DroppableCell: React.FC<DroppableCellProps> = ({\n  id,\n  date,\n  resourceId,\n  children,\n  className,\n  style,\n  onClick,\n}) => {\n  const isPast = isPastDate(date);\n\n  const { isOver, setNodeRef } = useDroppable({\n    id,\n    data: { date, resourceId },\n    disabled: isPast,\n  });\n\n  // Determine quarter based on minutes for graduated coloring (active drag state only)\n  const minutes = date.getMinutes();\n  const activeQuarterClass =\n    minutes === 0\n      ? 'bg-blue-50/50 dark:bg-blue-900/10 ring-2 ring-primary ring-inset'\n      : minutes === 15\n        ? 'bg-blue-50/80 dark:bg-blue-900/20 ring-2 ring-primary ring-inset'\n        : minutes === 30\n          ? 'bg-blue-100/50 dark:bg-blue-900/30 ring-2 ring-primary ring-inset'\n          : 'bg-blue-100/80 dark:bg-blue-900/40 ring-2 ring-primary ring-inset';\n\n  return (\n    <div\n      ref={setNodeRef}\n      className={cn(\n        className,\n        isOver && !isPast && activeQuarterClass,\n        isPast &&\n          'pointer-events-auto cursor-not-allowed !bg-gray-100 text-muted-foreground/80 dark:!bg-gray-700/90 [&_*]:pointer-events-none'\n      )}\n      style={style}\n      onClick={isPast ? undefined : onClick}\n    >\n      {children}\n    </div>\n  );\n};\n","import React, { useMemo, useCallback } from 'react';\nimport { format, isSameMonth, isToday, startOfWeek, endOfWeek, eachDayOfInterval } from 'date-fns';\nimport { toZonedTime } from 'date-fns-tz';\nimport { getMonthGrid } from '../lib/date';\nimport { CalendarEvent } from '../types';\nimport { cn } from '../utils';\nimport { DraggableEvent } from '../components/dnd/DraggableEvent';\nimport { DroppableCell } from '../components/dnd/DroppableCell';\nimport { Locale } from 'date-fns';\n\ninterface MonthViewProps {\n  currentDate: Date;\n  events: CalendarEvent[];\n  onEventClick?: (event: CalendarEvent) => void;\n  onDateClick?: (date: Date) => void;\n  timezone?: string;\n  locale?: Locale;\n}\n\n// Memoized Event Item Component for performance\nconst EventItem = React.memo(\n  ({\n    event,\n    onEventClick,\n  }: {\n    event: CalendarEvent;\n    onEventClick?: (e: CalendarEvent) => void;\n  }) => (\n    <DraggableEvent event={event}>\n      <div\n        className={cn(\n          'cursor-pointer truncate rounded-lg px-2.5 py-1.5 text-xs shadow-sm transition-all duration-200',\n          'hover:z-10 hover:scale-[1.02] hover:shadow-md',\n          !event.color &&\n            'border-[0.5px] border-primary/20 bg-primary/10 text-primary hover:bg-primary/15'\n        )}\n        style={\n          event.color\n            ? {\n                backgroundColor: `${event.color}20`,\n                color: event.color,\n                borderLeft: `3px solid ${event.color}`,\n              }\n            : undefined\n        }\n        onClick={(e) => {\n          e.stopPropagation();\n          onEventClick?.(event);\n        }}\n      >\n        <span className=\"font-medium\">{event.title}</span>\n      </div>\n    </DraggableEvent>\n  )\n);\n\nEventItem.displayName = 'EventItem';\n\nexport const MonthView: React.FC<MonthViewProps> = ({\n  currentDate,\n  events,\n  onEventClick,\n  onDateClick,\n  timezone,\n  locale,\n}) => {\n  const days = useMemo(() => getMonthGrid(currentDate), [currentDate]);\n\n  // Dynamic week days generation\n  const weekDays = useMemo(() => {\n    const start = startOfWeek(currentDate, { weekStartsOn: 1 });\n    const end = endOfWeek(currentDate, { weekStartsOn: 1 });\n    return eachDayOfInterval({ start, end });\n  }, [currentDate]);\n\n  // Timezone adjustment helper\n  const getZonedDate = useCallback(\n    (date: Date) => {\n      return timezone ? toZonedTime(date, timezone) : date;\n    },\n    [timezone]\n  );\n\n  // Pre-calculate event buckets for O(1) access during render\n  // This is crucial for handling 10000+ events\n  const eventsByDay = useMemo(() => {\n    const map = new Map<string, CalendarEvent[]>();\n\n    events.forEach((event) => {\n      const zonedStart = getZonedDate(event.start);\n      // Use date string as key (YYYY-MM-DD)\n      const key = format(zonedStart, 'yyyy-MM-dd');\n\n      if (!map.has(key)) {\n        map.set(key, []);\n      }\n      map.get(key)!.push(event);\n    });\n\n    return map;\n  }, [events, getZonedDate]);\n\n  return (\n    <div className=\"scrollbar-hide flex h-full min-w-[800px] flex-col overflow-hidden rounded-2xl border-[0.5px] border-border/50 bg-[#F9F9FB] shadow-sm\">\n      <div className=\"relative flex-1 overflow-x-auto overflow-y-auto\">\n        {/* Sticky Header */}\n        <div className=\"sticky top-0 z-20 grid grid-cols-7 border-b-[0.5px] border-border/50 bg-gradient-to-r from-muted/30 via-muted/40 to-muted/30 backdrop-blur-sm\">\n          {weekDays.map((day) => (\n            <div\n              key={day.toISOString()}\n              className=\"border-r-[0.5px] border-border/30 py-3 text-center text-xs font-semibold uppercase tracking-wider text-muted-foreground last:border-r-0\"\n            >\n              {format(day, 'EEE', { locale })}\n            </div>\n          ))}\n        </div>\n        <div className=\"grid grid-cols-7\" style={{ gridAutoRows: '130px' }}>\n          {days.map((day) => {\n            const dayKey = format(day, 'yyyy-MM-dd');\n            const dayEvents = eventsByDay.get(dayKey) || [];\n\n            const isCurrentMonth = isSameMonth(day, currentDate);\n            const cellId = day.toISOString();\n\n            return (\n              <DroppableCell\n                key={cellId}\n                id={cellId}\n                date={day}\n                className={cn(\n                  'group relative flex h-[130px] flex-col gap-1.5 overflow-hidden border-b-[0.5px] border-r-[0.5px] border-border/30 p-2 transition-all duration-200 last:border-r-0',\n                  !isCurrentMonth && 'bg-muted/5 text-muted-foreground/60',\n                  isToday(day) && 'bg-primary/5 ring-1 ring-inset ring-primary/20'\n                )}\n                onClick={() => onDateClick?.(day)}\n              >\n                <div className=\"flex items-start justify-between\">\n                  <div\n                    className={cn(\n                      'flex h-7 w-7 items-center justify-center rounded-full text-sm font-semibold transition-all duration-200',\n                      isToday(day) && 'bg-primary text-white shadow-md shadow-primary/30'\n                    )}\n                  >\n                    {format(day, 'd', { locale })}\n                  </div>\n                  {dayEvents.length > 0 && (\n                    <div className=\"rounded-full bg-muted/50 px-1.5 py-0.5 text-[10px] font-medium text-muted-foreground/60\">\n                      {dayEvents.length}\n                    </div>\n                  )}\n                </div>\n\n                <div className=\"scrollbar-hide flex flex-1 flex-col gap-1 overflow-x-auto overflow-y-auto\">\n                  {dayEvents.slice(0, 4).map((event) => (\n                    <EventItem\n                      key={`${event.id}-${dayKey}`}\n                      event={event}\n                      onEventClick={onEventClick}\n                    />\n                  ))}\n                  {dayEvents.length > 4 && (\n                    <div className=\"cursor-pointer rounded-md bg-primary/5 px-2 py-1 text-center text-[10px] font-semibold text-primary transition-colors hover:bg-primary/10\">\n                      +{dayEvents.length - 4} more\n                    </div>\n                  )}\n                </div>\n              </DroppableCell>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\nimport {\n  format,\n  isSameDay,\n  differenceInMinutes,\n  isToday,\n  startOfWeek,\n  endOfWeek,\n  eachDayOfInterval,\n} from 'date-fns';\nimport { toZonedTime } from 'date-fns-tz';\nimport { CalendarEvent } from '../types';\nimport { cn } from '../utils';\nimport { DraggableEvent } from '../components/dnd/DraggableEvent';\nimport { DroppableCell } from '../components/dnd/DroppableCell';\nimport { Locale } from 'date-fns';\n\ninterface WeekViewProps {\n  currentDate: Date;\n  events: CalendarEvent[];\n  onEventClick?: (event: CalendarEvent) => void;\n  onTimeSlotClick?: (date: Date) => void;\n  timezone?: string;\n  locale?: Locale;\n  readonly?: boolean;\n}\n\nexport const WeekView: React.FC<WeekViewProps> = ({\n  currentDate,\n  events,\n  onEventClick,\n  onTimeSlotClick,\n  timezone,\n  locale,\n  readonly,\n}) => {\n  // Generate days for the week\n  const start = startOfWeek(currentDate, { weekStartsOn: 1 });\n  const end = endOfWeek(currentDate, { weekStartsOn: 1 });\n  const weekDays = eachDayOfInterval({ start, end });\n  const hours = Array.from({ length: 24 }, (_, i) => i);\n\n  const hourHeight = 60; // px\n  const scrollContainerRef = React.useRef<HTMLDivElement>(null);\n\n  const [now, setNow] = React.useState(new Date());\n\n  React.useEffect(() => {\n    const interval = setInterval(() => setNow(new Date()), 60000);\n    return () => clearInterval(interval);\n  }, []);\n\n  // Auto-scroll to 8am on mount for better UX\n  React.useEffect(() => {\n    if (scrollContainerRef.current) {\n      const scrollToActualTime = () => {\n        const currentHour = now.getHours();\n        const offsetHour = 4; // Scroll a bit above current hour\n        return (currentHour - offsetHour) * hourHeight;\n      };\n      scrollContainerRef.current.scrollTop = scrollToActualTime();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // Timezone adjustment helper\n  const getZonedDate = (date: Date) => {\n    return timezone ? toZonedTime(date, timezone) : date;\n  };\n\n  const zonedNow = getZonedDate(new Date());\n\n  const getTimezoneDisplay = (tz: string | undefined) => {\n    // Use zonedNow if tz matches, otherwise calculate for specific tz if needed\n    // But here tz IS the current view timezone.\n    const date = now;\n    let displayTime = '';\n    let acronym = '';\n\n    if (!tz) {\n      // Local time\n      displayTime = format(date, 'HH:mm');\n      try {\n        acronym =\n          new Intl.DateTimeFormat('en-US', { timeZoneName: 'short' })\n            .formatToParts(date)\n            .find((part) => part.type === 'timeZoneName')?.value || '';\n      } catch {\n        acronym = 'LOC';\n      }\n    } else {\n      try {\n        const zDate = toZonedTime(date, tz);\n        displayTime = format(zDate, 'HH:mm');\n\n        // Get acronym\n        // Note: Intl.DateTimeFormat needs the IANA timezone string\n        acronym =\n          new Intl.DateTimeFormat('en-US', { timeZone: tz, timeZoneName: 'short' })\n            .formatToParts(date)\n            .find((part) => part.type === 'timeZoneName')?.value || '';\n      } catch {\n        // Fallback\n        displayTime = format(date, 'HH:mm');\n        acronym = tz;\n      }\n    }\n\n    // Simplify generic long names if necessary, though 'short' usually works well.\n    // E.g. \"GMT-5\" is often returned for offsets. The user asked for \"EST\", \"PST\".\n    // Chrome/Node usually return \"EST\" for America/New_York.\n\n    return (\n      <div className=\"flex flex-col items-center justify-center leading-tight\">\n        <span>{displayTime}</span>\n        <span className=\"text-[10px] opacity-75\">({acronym})</span>\n      </div>\n    );\n  };\n\n  const timeFormat = locale?.code === 'fr' ? 'H:mm' : 'h a';\n  const eventTimeFormat = locale?.code === 'fr' ? 'H:mm' : 'h:mm a';\n  const nowFormat = locale?.code === 'fr' ? 'H:mm' : 'h:mm';\n\n  return (\n    <div className=\"flex h-full min-w-[800px] flex-col overflow-hidden rounded-2xl border-[0.5px] border-border/50 bg-background shadow-sm\">\n      {/* Scrollable Container - includes header for proper alignment */}\n      <div\n        ref={scrollContainerRef}\n        className=\"scrollbar-hide relative flex-1 overflow-y-auto scroll-smooth bg-background\"\n        style={{ scrollbarGutter: 'stable' }}\n      >\n        {/* Header - sticky inside scroll container */}\n        <div className=\"sticky top-0 z-20 flex border-b-[0.5px] border-border/50 bg-[#14141705] backdrop-blur-sm\">\n          <div className=\"flex w-16 flex-none items-center justify-center border-r-[0.5px] border-border/30 bg-[#14141705] p-3 text-center text-xs font-semibold text-muted-foreground\">\n            {getTimezoneDisplay(timezone)}\n          </div>\n          <div className=\"grid flex-1 grid-cols-7\">\n            {weekDays.map((day, index) => (\n              <div\n                key={day.toISOString()}\n                className={cn(\n                  'bg-[#14141705] px-2 py-3 text-center',\n                  index > 0 && 'border-l-[0.5px] border-border/30 bg-[#14141705]'\n                )}\n              >\n                <div className=\"mb-1.5 text-[10px] font-semibold uppercase tracking-wider text-muted-foreground\">\n                  {format(day, 'EEE', { locale })}\n                </div>\n                <div\n                  className={cn(\n                    'mx-auto flex h-9 w-9 items-center justify-center rounded-full bg-[#14141705] text-sm font-semibold transition-all duration-200',\n                    isToday(day)\n                      ? 'scale-110 bg-primary text-white shadow-lg shadow-primary/30'\n                      : 'text-foreground hover:bg-accent/80'\n                  )}\n                >\n                  {format(day, 'd', { locale })}\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n\n        {/* Grid Content */}\n        <div className=\"relative flex min-w-full\" style={{ height: hours.length * hourHeight }}>\n          {/* Time Labels Column */}\n          <div className=\"relative w-16 flex-none border-r-[0.5px] border-border/30 bg-[#14141705]\">\n            {hours.map((hour) => (\n              <div\n                key={hour}\n                className=\"relative box-border w-full bg-[#14141705] pr-3 text-right text-[11px] font-medium tabular-nums text-muted-foreground/80\"\n                style={{ height: hourHeight }}\n              >\n                <span className=\"block -translate-y-1/2\">\n                  {hour !== 0 && format(new Date().setHours(hour, 0, 0, 0), timeFormat, { locale })}\n                </span>\n              </div>\n            ))}\n          </div>\n\n          {/* Days Columns */}\n          <div className=\"relative grid flex-1 grid-cols-7\">\n            {weekDays.map((day, dayIndex) => {\n              // Filter events for this day\n              const dayEvents = events.filter((e) => {\n                const zonedStart = getZonedDate(e.start);\n                return isSameDay(zonedStart, day);\n              });\n\n              return (\n                <div\n                  key={day.toISOString()}\n                  className={cn(\n                    'relative h-full bg-[#F9F9FB]',\n                    dayIndex > 0 && 'border-l-[0.5px] border-border/30'\n                  )}\n                >\n                  {/* Grid Rows (Droppable Cells) */}\n                  {hours.map((hour) => {\n                    return (\n                      <div\n                        key={hour}\n                        className=\"relative box-border w-full border-b-[0.5px] border-dashed border-border/20\"\n                        style={{ height: hourHeight }}\n                      >\n                        {/* 4 x 15-minute intervals */}\n                        {[0, 15, 30, 45].map((minute) => {\n                          const cellDate = new Date(day);\n                          cellDate.setHours(hour, minute, 0, 0);\n                          const cellId = cellDate.toISOString();\n\n                          return (\n                            <DroppableCell\n                              key={minute}\n                              id={cellId}\n                              date={cellDate}\n                              className=\"absolute left-0 right-0 z-0 w-full transition-colors\"\n                              style={{\n                                height: '25%',\n                                top: `${(minute / 60) * 100}%`,\n                              }}\n                            >\n                              <div\n                                className=\"h-full w-full cursor-pointer bg-transparent\"\n                                onClick={() => onTimeSlotClick?.(cellDate)}\n                              />\n                            </DroppableCell>\n                          );\n                        })}\n                      </div>\n                    );\n                  })}\n\n                  {/* Events Overlay */}\n                  {dayEvents.map((event) => {\n                    // Calculate layout for overlapping events\n                    // Find all events that overlap with this one\n                    const overlappingEvents = dayEvents.filter((e) => {\n                      if (e.id === event.id) return false;\n                      const s1 = getZonedDate(event.start).getTime();\n                      const e1 = getZonedDate(event.end).getTime();\n                      const s2 = getZonedDate(e.start).getTime();\n                      const e2 = getZonedDate(e.end).getTime();\n                      return s1 < e2 && e1 > s2;\n                    });\n\n                    // Calculate horizontal position (simple version)\n                    // A more robust algorithm would use graph coloring or column packing\n                    // For now, we can check how many simultaneous events exist and assign width/left\n\n                    // Sort overlapping group by start time\n                    const group = [event, ...overlappingEvents].sort(\n                      (a, b) =>\n                        getZonedDate(a.start).getTime() - getZonedDate(b.start).getTime() ||\n                        (a.id > b.id ? 1 : -1) // stable sort\n                    );\n\n                    const index = group.findIndex((e) => e.id === event.id);\n                    const count = group.length;\n\n                    const widthPercent = 100 / count;\n                    const leftPercent = index * widthPercent;\n\n                    const zonedEventStart = getZonedDate(event.start);\n                    const zonedEventEnd = getZonedDate(event.end);\n\n                    const startMinutes =\n                      zonedEventStart.getHours() * 60 + zonedEventStart.getMinutes();\n                    const durationMinutes = differenceInMinutes(zonedEventEnd, zonedEventStart);\n\n                    const top = (startMinutes / 60) * hourHeight;\n                    const height = (durationMinutes / 60) * hourHeight;\n\n                    const isShortEvent = durationMinutes < 60;\n\n                    return (\n                      <DraggableEvent\n                        key={`${event.id}-${day.toISOString()}`}\n                        event={event}\n                        className={`absolute z-10 transition-all ${readonly ? 'cursor-default' : ''}`}\n                        style={{\n                          top: `${top}px`,\n                          height: `${Math.max(height, 20)}px`,\n                          left: `${leftPercent}%`,\n                          width: `${widthPercent}%`,\n                          // Add minimal spacing between overlapping events\n                          paddingRight: count > 1 ? '2px' : '0',\n                        }}\n                      >\n                        <div\n                          className={cn(\n                            'group relative overflow-hidden rounded-md border shadow-sm transition-all hover:shadow-md',\n                            'glass',\n                            readonly ? 'cursor-default' : 'cursor-grab active:cursor-grabbing',\n                            !event.color && 'border-primary/20 bg-primary/10',\n                            isShortEvent ? 'flex items-center justify-center px-1' : 'p-2',\n                            // Add active border for overlapped events to distinguish them\n                            count > 1 && 'border-l-4 border-l-primary/50'\n                          )}\n                          style={{\n                            height: '100%',\n                            backgroundColor: event.color ? `${event.color}15` : undefined,\n                            borderColor: event.color ? `${event.color}40` : undefined,\n                            borderLeftWidth: '3px',\n                            borderLeftColor: event.color || '#141417',\n                          }}\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            onEventClick?.(event);\n                          }}\n                          title={count > 1 ? `${event.title} (${index + 1}/${count})` : undefined}\n                        >\n                          <div className=\"flex h-full w-full flex-col overflow-hidden\">\n                            <div\n                              className={cn(\n                                'truncate font-semibold leading-tight text-foreground/90',\n                                isShortEvent ? 'text-center text-xs' : 'text-xs'\n                              )}\n                            >\n                              {event.title}\n                            </div>\n                            {!isShortEvent && (\n                              <>\n                                <div className=\"mt-0.5 truncate text-[10px] font-medium leading-tight text-muted-foreground\">\n                                  {format(zonedEventStart, eventTimeFormat, { locale })}\n                                </div>\n                                {event.description && height > 50 && (\n                                  <div className=\"mt-1 truncate text-[10px] font-normal text-[#4C4C56] opacity-80\">\n                                    {event.description}\n                                  </div>\n                                )}\n                              </>\n                            )}\n                            {/* Overlap Badge */}\n                            {count > 1 && !isShortEvent && (\n                              <div className=\"absolute right-1 top-1 flex h-4 w-4 items-center justify-center rounded-full border border-border bg-background/80 text-[9px] font-bold text-muted-foreground shadow-sm backdrop-blur-sm\">\n                                {count}\n                              </div>\n                            )}\n                          </div>\n                        </div>\n                      </DraggableEvent>\n                    );\n                  })}\n\n                  {/* Current Time Indicator */}\n                  {isToday(day) && (\n                    <div\n                      className=\"pointer-events-none absolute left-0 right-0 z-20 flex items-center\"\n                      style={{\n                        top: `${((zonedNow.getHours() * 60 + zonedNow.getMinutes()) / 60) * hourHeight}px`,\n                      }}\n                    >\n                      <div className=\"h-[2px] w-full bg-gradient-to-r from-primary via-primary to-primary/50\" />\n                      <div className=\"absolute -left-1.5 h-3 w-3 animate-pulse rounded-full bg-primary shadow-lg shadow-primary/40 ring-2 ring-background\" />\n                    </div>\n                  )}\n                </div>\n              );\n            })}\n          </div>\n        </div>\n\n        {/* Current Time Label (Left Axis) */}\n        <div\n          className=\"pointer-events-none absolute left-0 z-30 flex w-16 justify-end pr-2\"\n          style={{\n            top: `${((zonedNow.getHours() * 60 + zonedNow.getMinutes()) / 60) * hourHeight + 80}px`,\n          }}\n        >\n          <span className=\"-translate-y-1/2 rounded-md bg-primary px-1.5 py-0.5 text-[10px] font-bold text-white shadow-md backdrop-blur-none\">\n            {format(zonedNow, nowFormat, { locale })}\n          </span>\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\nimport { format, differenceInMinutes, isToday, isSameDay } from 'date-fns';\nimport { toZonedTime } from 'date-fns-tz';\nimport { CalendarEvent } from '../types';\nimport { cn } from '../utils';\nimport { DraggableEvent } from '../components/dnd/DraggableEvent';\nimport { DroppableCell } from '../components/dnd/DroppableCell';\nimport { Locale } from 'date-fns';\n\ninterface DayViewProps {\n  currentDate: Date;\n  events: CalendarEvent[];\n  onEventClick?: (event: CalendarEvent) => void;\n  onTimeSlotClick?: (date: Date) => void;\n  timezone?: string;\n  locale?: Locale;\n  readonly?: boolean;\n  translations?: {\n    today?: string;\n  };\n}\n\nexport const DayView: React.FC<DayViewProps> = ({\n  currentDate,\n  events,\n  onEventClick,\n  onTimeSlotClick,\n  timezone,\n  locale,\n  readonly,\n  translations,\n}) => {\n  const hours = Array.from({ length: 24 }, (_, i) => i);\n  const hourHeight = 80; // Larger height for Day View\n  const scrollContainerRef = React.useRef<HTMLDivElement>(null);\n\n  const [now, setNow] = React.useState(new Date());\n\n  React.useEffect(() => {\n    const interval = setInterval(() => setNow(new Date()), 60000);\n    return () => clearInterval(interval);\n  }, []);\n\n  // Auto-scroll to 8am on mount\n  React.useEffect(() => {\n    if (scrollContainerRef.current) {\n      const scrollToActualTime = () => {\n        const currentHour = now.getHours();\n        const offsetHour = 3; // Scroll a bit above current hour\n        return (currentHour - offsetHour) * hourHeight;\n      };\n      scrollContainerRef.current.scrollTop = scrollToActualTime();\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // Timezone adjustment helper\n  const getZonedDate = (date: Date) => {\n    return timezone ? toZonedTime(date, timezone) : date;\n  };\n\n  const zonedNow = getZonedDate(now);\n\n  // Filter events for the current day\n  const dayEvents = events.filter((e) => {\n    const zonedStart = getZonedDate(e.start);\n    return isSameDay(zonedStart, currentDate);\n  });\n\n  const timeFormat = locale?.code === 'fr' ? 'H:mm' : 'h a';\n  const eventTimeFormat = locale?.code === 'fr' ? 'H:mm' : 'h:mm a';\n  const nowFormat = locale?.code === 'fr' ? 'H:mm' : 'h:mm a';\n\n  return (\n    <div className=\"flex h-full flex-col overflow-hidden rounded-2xl border-[0.5px] border-border/50 bg-[#14141705] shadow-sm\">\n      {/* Header */}\n      <div className=\"shrink-0 border-b-[0.5px] border-border/50 bg-[#14141705] px-6 py-4 text-center\">\n        <div className=\"flex items-center justify-center gap-3\">\n          <h2 className=\"text-xl font-semibold capitalize text-foreground\">\n            {format(currentDate, 'EEEE, MMMM d, yyyy', { locale })}\n          </h2>\n          {isToday(currentDate) && (\n            <span className=\"rounded-full bg-primary px-3 py-1 text-xs font-semibold text-white shadow-md\">\n              {translations?.today || 'Today'}\n            </span>\n          )}\n        </div>\n      </div>\n\n      {/* Grid */}\n      <div ref={scrollContainerRef} className=\"relative flex-1 overflow-y-auto bg-[#14141705]\">\n        <div className=\"relative flex\" style={{ height: hours.length * hourHeight }}>\n          {/* Time Labels */}\n          <div className=\"relative w-20 border-r-[0.5px] border-border/30 bg-[#14141705]\">\n            {hours.map((hour) => (\n              <div key={hour} className=\"relative w-full\" style={{ height: hourHeight }}>\n                {hour !== 0 && (\n                  <span className=\"absolute -top-3 left-1/2 w-full -translate-x-1/2 rounded-md px-1.5 py-0.5 text-center text-[11px] font-medium tabular-nums text-muted-foreground/80\">\n                    {format(new Date().setHours(hour, 0, 0, 0), timeFormat, { locale })}\n                  </span>\n                )}\n              </div>\n            ))}\n\n            {/* Left Side Current Time Indicator (Overlay) */}\n            {isToday(currentDate) && (\n              <div\n                className=\"pointer-events-none absolute left-0 z-30 flex w-full justify-end pr-2\"\n                style={{\n                  top: `${((zonedNow.getHours() * 60 + zonedNow.getMinutes()) / 60) * hourHeight}px`,\n                }}\n              >\n                <span className=\"-translate-y-1/2 rounded-lg bg-primary px-2 py-1 text-[10px] font-bold text-white shadow-md\">\n                  {format(zonedNow, nowFormat, { locale })}\n                </span>\n              </div>\n            )}\n          </div>\n\n          {/* Day Column */}\n          <div className=\"relative flex-1\">\n            {hours.map((hour) => {\n              return (\n                <div\n                  key={hour}\n                  className=\"relative box-border border-b-[0.5px] border-dashed border-border/20 bg-[#F9F9FB]\"\n                  style={{ height: hourHeight }}\n                >\n                  {/* 4 x 15-minute intervals */}\n                  {[0, 15, 30, 45].map((minute) => {\n                    const cellDate = new Date(currentDate);\n                    cellDate.setHours(hour, minute, 0, 0);\n                    const cellId = cellDate.toISOString();\n\n                    return (\n                      <DroppableCell\n                        key={minute}\n                        id={cellId}\n                        date={cellDate}\n                        className=\"absolute left-0 right-0 z-0 w-full transition-colors\"\n                        style={{\n                          height: '25%',\n                          top: `${(minute / 60) * 100}%`,\n                        }}\n                      >\n                        <div\n                          className=\"h-full w-full cursor-pointer bg-transparent\"\n                          onClick={() => onTimeSlotClick?.(cellDate)}\n                        />\n                      </DroppableCell>\n                    );\n                  })}\n                </div>\n              );\n            })}\n\n            {dayEvents.map((event) => {\n              // Calculate layout for overlapping events (same logic as WeekView)\n              const overlappingEvents = dayEvents.filter((e) => {\n                if (e.id === event.id) return false;\n                const s1 = getZonedDate(event.start).getTime();\n                const e1 = getZonedDate(event.end).getTime();\n                const s2 = getZonedDate(e.start).getTime();\n                const e2 = getZonedDate(e.end).getTime();\n                return s1 < e2 && e1 > s2;\n              });\n\n              // Sort overlapping group by start time for consistent positioning\n              const group = [event, ...overlappingEvents].sort(\n                (a, b) =>\n                  getZonedDate(a.start).getTime() - getZonedDate(b.start).getTime() ||\n                  (a.id > b.id ? 1 : -1)\n              );\n\n              const index = group.findIndex((e) => e.id === event.id);\n              const count = group.length;\n\n              const widthPercent = 100 / count;\n              const leftPercent = index * widthPercent;\n\n              const zonedStart = getZonedDate(event.start);\n              const zonedEnd = getZonedDate(event.end);\n\n              const startMinutes = zonedStart.getHours() * 60 + zonedStart.getMinutes();\n              const durationMinutes = differenceInMinutes(zonedEnd, zonedStart);\n              const top = (startMinutes / 60) * hourHeight;\n              const height = (durationMinutes / 60) * hourHeight;\n\n              const isShortEvent = durationMinutes < 45;\n\n              return (\n                <DraggableEvent\n                  key={`${event.id}-${currentDate.toISOString()}`}\n                  event={event}\n                  className={`absolute z-10 transition-all ${readonly ? 'cursor-default' : ''}`}\n                  style={{\n                    top: `${top}px`,\n                    height: `${Math.max(height, 28)}px`,\n                    left: `calc(${leftPercent}% + 4px)`,\n                    width: `calc(${widthPercent}% - 8px)`,\n                    paddingRight: count > 1 ? '2px' : '0',\n                  }}\n                >\n                  <div\n                    className={cn(\n                      'group h-full overflow-hidden rounded-lg border-[0.5px] shadow-sm transition-all hover:z-20 hover:shadow-lg',\n                      'glass backdrop-blur-sm',\n                      readonly ? 'cursor-default' : 'cursor-grab active:cursor-grabbing',\n                      !event.color && 'border-primary/20 bg-primary/10',\n                      isShortEvent ? 'flex items-center px-2' : 'px-3 py-2',\n                      count > 1 && 'border-l-4'\n                    )}\n                    style={{\n                      backgroundColor: event.color ? `${event.color}15` : undefined,\n                      borderColor: event.color ? `${event.color}30` : undefined,\n                      borderLeftColor: event.color || '#141417',\n                      borderLeftWidth: count > 1 ? '4px' : '3px',\n                    }}\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      onEventClick?.(event);\n                    }}\n                    title={count > 1 ? `${event.title} (${index + 1}/${count})` : undefined}\n                  >\n                    <div className=\"flex h-full w-full flex-col overflow-hidden\">\n                      <div\n                        className={cn(\n                          'truncate font-semibold leading-tight',\n                          isShortEvent ? 'text-xs' : 'text-sm',\n                          event.color ? 'text-foreground' : 'text-foreground/90'\n                        )}\n                      >\n                        {event.title}\n                      </div>\n                      {!isShortEvent && (\n                        <>\n                          <div className=\"mt-0.5 text-xs font-medium text-muted-foreground\">\n                            {format(zonedStart, eventTimeFormat, { locale })}\n                          </div>\n                          {event.description && height > 60 && (\n                            <div className=\"mt-1 line-clamp-2 text-xs text-muted-foreground/80\">\n                              {event.description}\n                            </div>\n                          )}\n                        </>\n                      )}\n                      {/* Overlap Badge */}\n                      {count > 1 && !isShortEvent && (\n                        <div className=\"absolute right-1.5 top-1.5 flex h-5 w-5 items-center justify-center rounded-full border border-border bg-background/90 text-[10px] font-bold text-muted-foreground shadow-sm backdrop-blur-sm\">\n                          {count}\n                        </div>\n                      )}\n                    </div>\n                  </div>\n                </DraggableEvent>\n              );\n            })}\n\n            {/* Current Time Indicator */}\n            {isToday(currentDate) && (\n              <div\n                className=\"pointer-events-none absolute left-0 right-0 z-20 flex items-center\"\n                style={{\n                  top: `${((zonedNow.getHours() * 60 + zonedNow.getMinutes()) / 60) * hourHeight}px`,\n                }}\n              >\n                {/* Line */}\n                <div className=\"h-[2px] w-full bg-gradient-to-r from-primary via-primary to-primary/50\" />\n                {/* Dot */}\n                <div className=\"absolute -left-1.5 h-3 w-3 animate-pulse rounded-full bg-primary shadow-lg shadow-primary/40 ring-2 ring-background\" />\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React, { useMemo } from 'react';\nimport {\n  format,\n  isSameDay,\n  isToday,\n  isTomorrow,\n  addDays,\n  startOfDay,\n  differenceInMinutes,\n} from 'date-fns';\nimport { Locale } from 'date-fns';\nimport { CalendarEvent } from '../types';\nimport { cn } from '../utils';\nimport { motion } from 'framer-motion';\nimport { Clock, Users, Paperclip, Bell } from 'lucide-react';\n\ninterface AgendaViewProps {\n  currentDate: Date;\n  events: CalendarEvent[];\n  onEventClick?: (event: CalendarEvent) => void;\n  onCreateEvent?: () => void;\n  locale?: Locale;\n  translations?: {\n    today?: string;\n    tomorrow?: string;\n    allDay?: string;\n    eventCount?: string;\n    eventsCount?: string;\n    guestCount?: string;\n    guestsCount?: string;\n  };\n}\n\nconst formatDuration = (start: Date, end: Date): string => {\n  const minutes = differenceInMinutes(end, start);\n  if (minutes < 60) return `${minutes}m`;\n  const hours = Math.floor(minutes / 60);\n  const remainingMinutes = minutes % 60;\n  if (remainingMinutes === 0) return `${hours}h`;\n  return `${hours}h ${remainingMinutes}m`;\n};\n\nexport const AgendaView: React.FC<AgendaViewProps> = ({\n  currentDate,\n  events,\n  onEventClick,\n  locale,\n  translations,\n}) => {\n  const getDateLabel = (date: Date): string => {\n    if (isToday(date)) return translations?.today || 'Today';\n    if (isTomorrow(date)) return translations?.tomorrow || 'Tomorrow';\n    return format(date, 'EEEE', { locale });\n  };\n\n  const getEventCountLabel = (count: number): string => {\n    if (count === 1) {\n      return `1 ${translations?.eventCount || 'event'}`;\n    }\n    return `${count} ${translations?.eventsCount || 'events'}`;\n  };\n\n  const getGuestCountLabel = (count: number): string => {\n    if (count === 1) {\n      return `1 ${translations?.guestCount || 'guest'}`;\n    }\n    return `${count} ${translations?.guestsCount || 'guests'}`;\n  };\n  // Group events by day for the next 30 days starting from currentDate\n  const groupedEvents = useMemo(() => {\n    const startDate = startOfDay(currentDate);\n\n    const groups: { date: Date; events: CalendarEvent[] }[] = [];\n\n    // Sort all events by start time first\n    const sortedEvents = [...events].sort((a, b) => a.start.getTime() - b.start.getTime());\n\n    // Iterate through the next 30 days\n    for (let i = 0; i < 30; i++) {\n      const day = addDays(startDate, i);\n      const dayEvents = sortedEvents.filter((event) => isSameDay(event.start, day));\n\n      if (dayEvents.length > 0) {\n        groups.push({ date: day, events: dayEvents });\n      }\n    }\n\n    return groups;\n  }, [currentDate, events]);\n\n  const container = {\n    hidden: { opacity: 0 },\n    show: {\n      opacity: 1,\n      transition: {\n        staggerChildren: 0.05,\n      },\n    },\n  };\n\n  const item = {\n    hidden: { opacity: 0, x: -20 },\n    show: { opacity: 1, x: 0 },\n  };\n\n  return (\n    <div className=\"flex h-full min-w-0 flex-col overflow-y-auto overflow-x-hidden bg-[#F9F9FB]\">\n      <motion.div\n        className=\"mx-auto w-full min-w-0 max-w-3xl px-4 pb-10 md:px-6\"\n        variants={container}\n        initial=\"hidden\"\n        animate=\"show\"\n      >\n        {groupedEvents.map((group) => (\n          <motion.div key={group.date.toISOString()} className=\"relative\" variants={item}>\n            {/* Date Header */}\n            <div className=\"sticky top-0 z-10 min-w-0 border-b border-border/50 bg-[#F9F9FB] py-4 backdrop-blur-md\">\n              <div className=\"flex min-w-0 items-center gap-2 sm:gap-4\">\n                {/* Date box */}\n                <div\n                  className={cn(\n                    'flex h-14 w-14 shrink-0 flex-col items-center justify-center rounded-xl transition-all sm:h-16 sm:w-16 sm:rounded-2xl',\n                    isToday(group.date)\n                      ? 'bg-primary text-white shadow-lg'\n                      : 'bg-muted/50 text-foreground'\n                  )}\n                >\n                  <span className=\"text-2xl font-bold leading-none\">\n                    {format(group.date, 'd', { locale })}\n                  </span>\n                  <span className=\"text-xs font-medium uppercase tracking-wide opacity-80\">\n                    {format(group.date, 'MMM', { locale })}\n                  </span>\n                </div>\n\n                {/* Day info */}\n                <div className=\"min-w-0 flex-1\">\n                  <span\n                    className={cn(\n                      'block truncate text-base font-semibold sm:text-lg',\n                      isToday(group.date) && 'text-primary'\n                    )}\n                  >\n                    {getDateLabel(group.date)}\n                  </span>\n                  <span className=\"block text-xs text-muted-foreground sm:text-sm\">\n                    {getEventCountLabel(group.events.length)}\n                  </span>\n                </div>\n              </div>\n            </div>\n\n            {/* Events List */}\n            <div className=\"space-y-3 py-4\">\n              {group.events.map((event) => (\n                <motion.div\n                  key={event.id}\n                  onClick={() => onEventClick?.(event)}\n                  className={cn(\n                    'group relative flex min-w-0 gap-2 rounded-xl border border-border/40 p-3 sm:gap-4 sm:rounded-2xl sm:p-4',\n                    'hover:border-primary/40 hover:shadow-lg hover:shadow-primary/5',\n                    'cursor-pointer transition-all duration-200',\n                    'from-card via-card to-card/80 bg-gradient-to-br'\n                  )}\n                  whileHover={{ scale: 1.01, y: -2 }}\n                  transition={{ duration: 0.2 }}\n                >\n                  {/* Left accent bar */}\n                  <div\n                    className=\"absolute bottom-3 left-0 top-3 w-1 rounded-full\"\n                    style={{ backgroundColor: event.color || 'var(--primary)' }}\n                  />\n\n                  {/* Time Column */}\n                  <div className=\"flex w-14 shrink-0 flex-col items-center pl-2 sm:min-w-[70px]\">\n                    {event.allDay ? (\n                      <div className=\"flex flex-col items-center\">\n                        <span className=\"rounded-full bg-muted/80 px-2.5 py-1 text-xs font-semibold text-muted-foreground\">\n                          {translations?.allDay || 'All Day'}\n                        </span>\n                      </div>\n                    ) : (\n                      <div className=\"flex flex-col items-center\">\n                        <span className=\"text-base font-semibold text-foreground\">\n                          {format(event.start, locale?.code === 'fr' ? 'H:mm' : 'h:mm', {\n                            locale,\n                          })}\n                        </span>\n                        {locale?.code !== 'fr' && (\n                          <span className=\"text-xs uppercase text-muted-foreground\">\n                            {format(event.start, 'a', { locale })}\n                          </span>\n                        )}\n                        <div className=\"my-1 h-3 w-px bg-border\" />\n                        <span className=\"text-xs font-medium text-muted-foreground/70\">\n                          {formatDuration(event.start, event.end)}\n                        </span>\n                      </div>\n                    )}\n                  </div>\n\n                  {/* Event Details */}\n                  <div className=\"min-w-0 flex-1 space-y-2 overflow-hidden\">\n                    <div className=\"flex min-w-0 items-start justify-between gap-2\">\n                      <h4 className=\"min-w-0 flex-1 truncate text-sm font-semibold text-foreground transition-colors group-hover:text-primary sm:text-base\">\n                        {event.title}\n                      </h4>\n                      {/* Color dot */}\n                      <div\n                        className=\"mt-1.5 h-3 w-3 shrink-0 rounded-full\"\n                        style={{ backgroundColor: event.color || 'var(--primary)' }}\n                      />\n                    </div>\n\n                    {event.description && (\n                      <div className=\"line-clamp-2 text-sm leading-relaxed text-muted-foreground\">\n                        {event.description}\n                      </div>\n                    )}\n\n                    {/* Meta info row */}\n                    <div className=\"flex min-w-0 flex-wrap items-center gap-2 pt-1 sm:gap-3\">\n                      {!event.allDay && (\n                        <div className=\"flex items-center gap-1.5 text-xs text-muted-foreground\">\n                          <Clock className=\"h-3.5 w-3.5\" />\n                          <span>\n                            {format(event.start, locale?.code === 'fr' ? 'H:mm' : 'h:mm a', {\n                              locale,\n                            })}\n                          </span>\n                        </div>\n                      )}\n\n                      {event.guests && event.guests.length > 0 && (\n                        <div className=\"flex items-center gap-1.5 text-xs text-muted-foreground\">\n                          <Users className=\"h-3.5 w-3.5\" />\n                          <span>{getGuestCountLabel(event.guests.length)}</span>\n                        </div>\n                      )}\n\n                      {event.attachments && event.attachments.length > 0 && (\n                        <div className=\"flex items-center gap-1.5 text-xs text-muted-foreground\">\n                          <Paperclip className=\"h-3.5 w-3.5\" />\n                          <span>{event.attachments.length}</span>\n                        </div>\n                      )}\n\n                      {event.reminders && event.reminders.length > 0 && (\n                        <div className=\"flex items-center gap-1.5 text-xs text-muted-foreground\">\n                          <Bell className=\"h-3.5 w-3.5\" />\n                          <span>{event.reminders.length}</span>\n                        </div>\n                      )}\n                    </div>\n                  </div>\n\n                  {/* Hover arrow indicator */}\n                  <div className=\"absolute right-2 top-1/2 hidden shrink-0 -translate-y-1/2 opacity-0 transition-opacity group-hover:opacity-100 sm:right-4 sm:block\">\n                    <svg\n                      className=\"h-5 w-5 text-muted-foreground\"\n                      viewBox=\"0 0 24 24\"\n                      fill=\"none\"\n                      stroke=\"currentColor\"\n                      strokeWidth=\"2\"\n                    >\n                      <path d=\"M9 18l6-6-6-6\" />\n                    </svg>\n                  </div>\n                </motion.div>\n              ))}\n            </div>\n          </motion.div>\n        ))}\n      </motion.div>\n    </div>\n  );\n};\n","import React, { useRef } from 'react';\nimport { format, startOfDay, differenceInMinutes, isSameDay } from 'date-fns';\nimport { CalendarEvent, Resource } from '../types';\nimport { Locale } from 'date-fns';\nimport { DraggableEvent } from '../components/dnd/DraggableEvent';\nimport { DroppableCell } from '../components/dnd/DroppableCell';\n\ninterface ResourceViewProps {\n  currentDate: Date;\n  events: CalendarEvent[];\n  resources: Resource[];\n  onEventClick?: (event: CalendarEvent) => void;\n  onTimeSlotClick?: (date: Date, resourceId: string) => void;\n  locale?: Locale;\n}\n\nexport const ResourceView: React.FC<ResourceViewProps> = ({\n  currentDate,\n  events,\n  resources,\n  onEventClick,\n  onTimeSlotClick,\n  locale,\n}) => {\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  // Define timeline: 8am to 8pm for example (or full 24h)\n  // Let's do 24h for flexibility, but maybe scroll to 8am\n  const hours = Array.from({ length: 24 }, (_, i) => i);\n  const hourWidth = 100; // px per hour\n\n  const timeFormat = locale?.code === 'fr' ? 'H:mm' : 'h a';\n\n  const getEventStyle = (event: CalendarEvent) => {\n    const start = new Date(event.start);\n    const end = new Date(event.end);\n    const dayStart = startOfDay(currentDate);\n\n    // Calculate minutes from start of day\n    const startMinutes = differenceInMinutes(start, dayStart);\n    const durationMinutes = differenceInMinutes(end, start);\n\n    const left = (startMinutes / 60) * hourWidth;\n    const width = (durationMinutes / 60) * hourWidth;\n\n    return {\n      left: `${left}px`,\n      width: `${Math.max(width, 4)}px`, // Min width for visibility\n    };\n  };\n\n  return (\n    <div className=\"flex h-full flex-col overflow-hidden bg-background\">\n      {/* Header: Hours */}\n      <div className=\"flex border-b border-border bg-muted/20\">\n        <div className=\"sticky left-0 z-20 w-48 shrink-0 border-r border-border bg-background p-4 text-sm font-semibold\">\n          Resources\n        </div>\n        <div className=\"flex overflow-hidden\">\n          <div className=\"relative flex\" style={{ width: hours.length * hourWidth }}>\n            {hours.map((hour) => (\n              <div\n                key={hour}\n                className=\"shrink-0 border-r border-border/50 p-2 text-xs font-medium text-muted-foreground\"\n                style={{ width: hourWidth }}\n              >\n                {format(new Date().setHours(hour, 0, 0, 0), timeFormat, { locale })}\n              </div>\n            ))}\n          </div>\n        </div>\n      </div>\n\n      {/* Body: Resources & Events */}\n      <div className=\"relative flex-1 overflow-auto\" ref={containerRef}>\n        <div className=\"min-w-fit\">\n          {resources.map((resource) => {\n            const resourceEvents = events.filter(\n              (e) => e.resourceId === resource.id && isSameDay(new Date(e.start), currentDate)\n            );\n\n            return (\n              <div key={resource.id} className=\"flex min-h-[100px] border-b border-border\">\n                {/* Resource Label Column */}\n                <div className=\"sticky left-0 z-10 flex w-48 shrink-0 items-center gap-3 border-r border-border bg-background p-4\">\n                  {resource.avatar ? (\n                    // eslint-disable-next-line @next/next/no-img-element\n                    <img\n                      src={resource.avatar}\n                      alt={resource.label}\n                      className=\"h-8 w-8 rounded-full object-cover\"\n                    />\n                  ) : (\n                    <div className=\"flex h-8 w-8 items-center justify-center rounded-full bg-primary/10 text-xs font-bold text-primary\">\n                      {resource.label.substring(0, 2).toUpperCase()}\n                    </div>\n                  )}\n                  <div className=\"flex flex-col\">\n                    <span className=\"text-sm font-medium\">{resource.label}</span>\n                    <span className=\"text-xs text-muted-foreground\">ID: {resource.id}</span>\n                  </div>\n                </div>\n\n                {/* Timeline Row */}\n                <div className=\"relative flex\" style={{ width: hours.length * hourWidth }}>\n                  {/* Grid Lines */}\n                  {hours.map((hour) => (\n                    <div key={hour} className=\"flex h-full shrink-0\" style={{ width: hourWidth }}>\n                      {[0, 15, 30, 45].map((minute) => {\n                        const slotDate = new Date(currentDate);\n                        slotDate.setHours(hour, minute, 0, 0);\n                        const slotId = `${resource.id}-${slotDate.toISOString()}`;\n\n                        return (\n                          <DroppableCell\n                            key={minute}\n                            id={slotId}\n                            date={slotDate}\n                            resourceId={resource.id}\n                            className=\"h-full flex-1 border-r border-border/10 last:border-border/30\"\n                            onClick={() => {\n                              onTimeSlotClick?.(slotDate, resource.id);\n                            }}\n                          />\n                        );\n                      })}\n                    </div>\n                  ))}\n\n                  {/* Events */}\n                  {resourceEvents.map((event) => (\n                    <DraggableEvent\n                      key={event.id}\n                      event={event}\n                      onClick={(e) => {\n                        e.stopPropagation();\n                        onEventClick?.(event);\n                      }}\n                      className=\"absolute bottom-2 top-2 z-10 cursor-pointer overflow-hidden rounded-md border px-2 py-1 text-xs font-medium shadow-sm transition-all hover:brightness-95\"\n                      style={{\n                        ...getEventStyle(event),\n                        backgroundColor: event.color || resource.color || 'var(--primary)',\n                        borderColor: 'rgba(0,0,0,0.1)',\n                        color: '#fff',\n                      }}\n                    >\n                      <div className=\"truncate\">{event.title}</div>\n                    </DraggableEvent>\n                  ))}\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\nimport { cn } from '../utils';\n\n// Base skeleton component\nexport const Skeleton: React.FC<{ className?: string; style?: React.CSSProperties }> = ({\n  className,\n  style,\n}) => <div className={cn('animate-pulse rounded bg-muted/40', className)} style={style} />;\n\n// Month View Skeleton\nexport const MonthViewSkeleton: React.FC = () => (\n  <div className=\"h-full overflow-hidden rounded-2xl border border-border/50 bg-background\">\n    {/* Header */}\n    <div className=\"grid grid-cols-7 border-b border-border/50 bg-muted/10\">\n      {Array.from({ length: 7 }).map((_, i) => (\n        <div key={i} className=\"border-r border-border/30 px-2 py-3 text-center last:border-r-0\">\n          <Skeleton className=\"mx-auto h-4 w-8\" />\n        </div>\n      ))}\n    </div>\n    {/* Grid */}\n    <div className=\"grid flex-1 grid-cols-7\">\n      {Array.from({ length: 35 }).map((_, i) => (\n        <div key={i} className=\"min-h-[120px] border-b border-r border-border/30 p-2\">\n          <Skeleton className=\"mb-2 h-4 w-6\" />\n          <div className=\"space-y-1\">\n            {i % 2 === 0 && <Skeleton className=\"h-5 w-full rounded-md\" />}\n            {i % 3 === 0 && <Skeleton className=\"h-5 w-3/4 rounded-md\" />}\n          </div>\n        </div>\n      ))}\n    </div>\n  </div>\n);\n\n// Week View Skeleton\nexport const WeekViewSkeleton: React.FC = () => (\n  <div className=\"h-full overflow-hidden rounded-2xl border border-border/50 bg-background\">\n    {/* Header */}\n    <div className=\"flex border-b border-border/50 bg-muted/10\">\n      <div className=\"w-16 border-r border-border/30 p-3\">\n        <Skeleton className=\"mx-auto h-8 w-10\" />\n      </div>\n      <div className=\"grid flex-1 grid-cols-7\">\n        {Array.from({ length: 7 }).map((_, i) => (\n          <div key={i} className=\"border-r border-border/30 px-2 py-3 text-center last:border-r-0\">\n            <Skeleton className=\"mx-auto mb-1 h-3 w-8\" />\n            <Skeleton className=\"mx-auto h-8 w-8 rounded-xl\" />\n          </div>\n        ))}\n      </div>\n    </div>\n    {/* Grid */}\n    <div className=\"flex flex-1\" style={{ height: '600px' }}>\n      <div className=\"w-16 border-r border-border/30\">\n        {Array.from({ length: 10 }).map((_, i) => (\n          <div key={i} className=\"relative h-[60px]\">\n            <Skeleton className=\"absolute right-2 h-4 w-10 -translate-y-1/2\" />\n          </div>\n        ))}\n      </div>\n      <div className=\"relative grid flex-1 grid-cols-7\">\n        {Array.from({ length: 7 }).map((_, colIdx) => (\n          <div key={colIdx} className=\"relative border-r border-border/30 last:border-r-0\">\n            {Array.from({ length: 10 }).map((_, rowIdx) => (\n              <div key={rowIdx} className=\"h-[60px] border-b border-dashed border-border/20\" />\n            ))}\n            {/* Skeleton events */}\n            {colIdx % 2 === 0 && (\n              <Skeleton\n                className=\"absolute rounded-md\"\n                style={{\n                  top: `${(colIdx * 50) % 400}px`,\n                  left: '4px',\n                  right: '4px',\n                  height: `${60 + ((colIdx * 30) % 120)}px`,\n                }}\n              />\n            )}\n          </div>\n        ))}\n      </div>\n    </div>\n  </div>\n);\n\n// Day View Skeleton\nexport const DayViewSkeleton: React.FC = () => (\n  <div className=\"h-full overflow-hidden rounded-2xl border border-border/50 bg-background\">\n    {/* Header */}\n    <div className=\"border-b border-border/50 bg-muted/10 px-6 py-4 text-center\">\n      <Skeleton className=\"mx-auto h-7 w-64\" />\n    </div>\n    {/* Grid */}\n    <div className=\"flex flex-1\" style={{ height: '600px' }}>\n      <div className=\"w-20 border-r border-border/30 bg-muted/5\">\n        {Array.from({ length: 10 }).map((_, i) => (\n          <div key={i} className=\"relative h-[80px]\">\n            <Skeleton className=\"absolute left-1/2 h-4 w-12 -translate-x-1/2 -translate-y-1/2\" />\n          </div>\n        ))}\n      </div>\n      <div className=\"relative flex-1\">\n        {Array.from({ length: 10 }).map((_, i) => (\n          <div key={i} className=\"h-[80px] border-b border-dashed border-border/20\" />\n        ))}\n        {/* Random events */}\n        <Skeleton\n          className=\"absolute left-4 right-4 rounded-lg\"\n          style={{ top: '160px', height: '120px' }}\n        />\n        <Skeleton\n          className=\"absolute left-4 right-4 rounded-lg\"\n          style={{ top: '400px', height: '80px' }}\n        />\n      </div>\n    </div>\n  </div>\n);\n\n// Agenda View Skeleton\nexport const AgendaViewSkeleton: React.FC = () => (\n  <div className=\"h-full overflow-hidden rounded-2xl border border-border/50 bg-background p-6\">\n    <div className=\"space-y-6\">\n      {Array.from({ length: 4 }).map((_, dayIdx) => (\n        <div key={dayIdx}>\n          <Skeleton className=\"mb-4 h-5 w-40\" />\n          <div className=\"space-y-3\">\n            {Array.from({ length: 2 + (dayIdx % 3) }).map((_, eventIdx) => (\n              <div key={eventIdx} className=\"flex items-center gap-4 rounded-xl bg-muted/10 p-3\">\n                <Skeleton className=\"h-10 w-10 rounded-lg\" />\n                <div className=\"flex-1 space-y-2\">\n                  <Skeleton className=\"h-4 w-3/4\" />\n                  <Skeleton className=\"h-3 w-1/2\" />\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      ))}\n    </div>\n  </div>\n);\n\n// Calendar Header Skeleton\nexport const CalendarHeaderSkeleton: React.FC = () => (\n  <div className=\"flex items-center justify-between border-b border-border/50 bg-muted/10 px-4 py-3\">\n    <div className=\"flex items-center gap-3\">\n      <Skeleton className=\"h-8 w-8 rounded-lg\" />\n      <div className=\"flex items-center gap-2\">\n        <Skeleton className=\"h-8 w-8 rounded-lg\" />\n        <Skeleton className=\"h-8 w-8 rounded-lg\" />\n        <Skeleton className=\"h-8 w-20 rounded-lg\" />\n      </div>\n      <Skeleton className=\"h-6 w-40\" />\n    </div>\n    <div className=\"flex items-center gap-2\">\n      {Array.from({ length: 4 }).map((_, i) => (\n        <Skeleton key={i} className=\"h-8 w-16 rounded-lg\" />\n      ))}\n    </div>\n  </div>\n);\n\n// Sidebar Skeleton\nexport const SidebarSkeleton: React.FC = () => (\n  <div className=\"h-full w-[260px] space-y-6 border-r border-border/50 bg-background p-4\">\n    {/* Create button */}\n    <Skeleton className=\"h-12 w-full rounded-2xl\" />\n\n    {/* Mini calendar */}\n    <div className=\"space-y-2\">\n      <div className=\"mb-2 flex items-center justify-between\">\n        <Skeleton className=\"h-4 w-20\" />\n        <div className=\"flex gap-1\">\n          <Skeleton className=\"h-6 w-6 rounded\" />\n          <Skeleton className=\"h-6 w-6 rounded\" />\n        </div>\n      </div>\n      <div className=\"grid grid-cols-7 gap-1\">\n        {Array.from({ length: 7 }).map((_, i) => (\n          <Skeleton key={i} className=\"mx-auto h-4 w-4\" />\n        ))}\n        {Array.from({ length: 35 }).map((_, i) => (\n          <Skeleton key={i} className=\"mx-auto h-7 w-7 rounded\" />\n        ))}\n      </div>\n    </div>\n\n    {/* Calendars section */}\n    <div className=\"rounded-2xl bg-muted/20 p-3\">\n      <Skeleton className=\"mb-3 h-4 w-20\" />\n      <div className=\"space-y-2\">\n        {Array.from({ length: 3 }).map((_, i) => (\n          <div key={i} className=\"flex items-center gap-3\">\n            <Skeleton className=\"h-5 w-5 rounded\" />\n            <Skeleton className=\"h-4 flex-1\" />\n          </div>\n        ))}\n      </div>\n    </div>\n  </div>\n);\n\n// Full Calendar Skeleton (combines all)\nexport const CalendarSkeleton: React.FC<{ view?: string }> = ({ view = 'month' }) => (\n  <div className=\"flex h-full flex-col\">\n    <CalendarHeaderSkeleton />\n    <div className=\"flex flex-1 overflow-hidden\">\n      <SidebarSkeleton />\n      <div className=\"flex-1 p-4\">\n        {view === 'month' && <MonthViewSkeleton />}\n        {view === 'week' && <WeekViewSkeleton />}\n        {view === 'day' && <DayViewSkeleton />}\n        {view === 'agenda' && <AgendaViewSkeleton />}\n      </div>\n    </div>\n  </div>\n);\n","import React, { useState, useCallback, useEffect, useRef } from 'react';\nimport { CalendarEvent } from '../types';\nimport { cn } from '../utils';\nimport { Edit3, Trash2, Copy } from 'lucide-react';\nimport { AnimatePresence, motion } from 'framer-motion';\n\ninterface ContextMenuAction {\n  id: string;\n  label: string;\n  icon?: React.ReactNode;\n  onClick: () => void;\n  variant?: 'default' | 'danger';\n  disabled?: boolean;\n}\n\ninterface EventContextMenuProps {\n  event: CalendarEvent | null;\n  position: { x: number; y: number } | null;\n  onClose: () => void;\n  onEdit?: (event: CalendarEvent) => void;\n  onDelete?: (eventId: string) => void;\n  onDuplicate?: (event: CalendarEvent) => void;\n  customActions?: ContextMenuAction[];\n  translations?: {\n    edit?: string;\n    delete?: string;\n    duplicate?: string;\n  };\n}\n\nexport const EventContextMenu: React.FC<EventContextMenuProps> = ({\n  event,\n  position,\n  onClose,\n  onEdit,\n  onDelete,\n  onDuplicate,\n  customActions = [],\n  translations,\n}) => {\n  const menuRef = useRef<HTMLDivElement>(null);\n\n  // Close on escape key\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === 'Escape') {\n        onClose();\n      }\n    };\n\n    if (position) {\n      document.addEventListener('keydown', handleKeyDown);\n      return () => document.removeEventListener('keydown', handleKeyDown);\n    }\n  }, [position, onClose]);\n\n  // Close on click outside\n  useEffect(() => {\n    const handleClickOutside = (e: MouseEvent) => {\n      if (menuRef.current && !menuRef.current.contains(e.target as Node)) {\n        onClose();\n      }\n    };\n\n    if (position) {\n      // Delay to prevent immediate close from the right-click that opened it\n      setTimeout(() => {\n        document.addEventListener('mousedown', handleClickOutside);\n      }, 0);\n      return () => document.removeEventListener('mousedown', handleClickOutside);\n    }\n  }, [position, onClose]);\n\n  if (!event || !position) return null;\n\n  const actions: ContextMenuAction[] = [\n    ...(onEdit\n      ? [\n          {\n            id: 'edit',\n            label: translations?.edit || 'Edit',\n            icon: <Edit3 className=\"h-4 w-4\" />,\n            onClick: () => {\n              onEdit(event);\n              onClose();\n            },\n          },\n        ]\n      : []),\n    ...(onDuplicate\n      ? [\n          {\n            id: 'duplicate',\n            label: translations?.duplicate || 'Duplicate',\n            icon: <Copy className=\"h-4 w-4\" />,\n            onClick: () => {\n              onDuplicate(event);\n              onClose();\n            },\n          },\n        ]\n      : []),\n    ...customActions,\n    ...(onDelete\n      ? [\n          {\n            id: 'delete',\n            label: translations?.delete || 'Delete',\n            icon: <Trash2 className=\"h-4 w-4\" />,\n            onClick: () => {\n              onDelete(event.id);\n              onClose();\n            },\n            variant: 'danger' as const,\n          },\n        ]\n      : []),\n  ];\n\n  // Calculate position to ensure menu stays within viewport\n  const adjustedPosition = {\n    x: Math.min(position.x, window.innerWidth - 200),\n    y: Math.min(position.y, window.innerHeight - (actions.length * 44 + 80)),\n  };\n\n  return (\n    <AnimatePresence>\n      <motion.div\n        ref={menuRef}\n        initial={{ opacity: 0, scale: 0.95, y: -5 }}\n        animate={{ opacity: 1, scale: 1, y: 0 }}\n        exit={{ opacity: 0, scale: 0.95, y: -5 }}\n        transition={{ duration: 0.15, ease: 'easeOut' }}\n        className=\"fixed z-[100] min-w-[180px] overflow-hidden rounded-xl border-[0.5px] border-border bg-background shadow-xl\"\n        style={{\n          left: adjustedPosition.x,\n          top: adjustedPosition.y,\n        }}\n      >\n        {/* Event preview header */}\n        <div className=\"border-b-[0.5px] border-border bg-muted/30 px-3 py-2\">\n          <div className=\"flex items-center gap-2\">\n            <div\n              className=\"h-2.5 w-2.5 shrink-0 rounded-full\"\n              style={{ backgroundColor: event.color || 'var(--primary)' }}\n            />\n            <span className=\"truncate text-sm font-medium text-foreground\">{event.title}</span>\n          </div>\n        </div>\n\n        {/* Actions */}\n        <div className=\"py-1\">\n          {actions.map((action, index) => (\n            <React.Fragment key={action.id}>\n              {index > 0 && action.variant === 'danger' && <div className=\"my-1 h-px bg-border\" />}\n              <button\n                onClick={action.onClick}\n                disabled={action.disabled}\n                className={cn(\n                  'flex w-full items-center gap-3 px-3 py-2 text-sm transition-colors',\n                  action.disabled && 'cursor-not-allowed opacity-50',\n                  action.variant === 'danger'\n                    ? 'text-red-600 hover:bg-red-50 dark:text-red-400 dark:hover:bg-red-900/20'\n                    : 'text-foreground hover:bg-accent'\n                )}\n              >\n                {action.icon}\n                <span>{action.label}</span>\n              </button>\n            </React.Fragment>\n          ))}\n        </div>\n      </motion.div>\n    </AnimatePresence>\n  );\n};\n\n// Hook to manage context menu state\nexport const useEventContextMenu = () => {\n  const [contextMenu, setContextMenu] = useState<{\n    event: CalendarEvent | null;\n    position: { x: number; y: number } | null;\n  }>({ event: null, position: null });\n\n  const openContextMenu = useCallback((event: CalendarEvent, e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    setContextMenu({\n      event,\n      position: { x: e.clientX, y: e.clientY },\n    });\n  }, []);\n\n  const closeContextMenu = useCallback(() => {\n    setContextMenu({ event: null, position: null });\n  }, []);\n\n  return {\n    contextMenuEvent: contextMenu.event,\n    contextMenuPosition: contextMenu.position,\n    openContextMenu,\n    closeContextMenu,\n  };\n};\n","/**\n * Converts a color string (hex or rgb) to HSL values (h s% l%) for Tailwind CSS variables.\n * @param color - The color string (e.g., \"#3b82f6\", \"3b82f6\", \"rgb(0, 84, 97)\")\n * @returns The HSL string (e.g., \"217 91% 60%\") or null if invalid\n */\nexport function colorToHsl(color: string): string | null {\n  let r = 0,\n    g = 0,\n    b = 0;\n\n  // Handle Hex\n  if (color.startsWith('#') || /^[0-9a-fA-F]{3,6}$/.test(color)) {\n    let c = color.replace(/^#/, '');\n    if (c.length === 3) {\n      c = c\n        .split('')\n        .map((char) => char + char)\n        .join('');\n    }\n    if (c.length !== 6) return null;\n\n    r = parseInt(c.substring(0, 2), 16) / 255;\n    g = parseInt(c.substring(2, 4), 16) / 255;\n    b = parseInt(c.substring(4, 6), 16) / 255;\n  }\n  // Handle RGB\n  else if (color.startsWith('rgb')) {\n    const match = color.match(/\\d+/g);\n    if (!match || match.length < 3) return null;\n    r = parseInt(match[0]) / 255;\n    g = parseInt(match[1]) / 255;\n    b = parseInt(match[2]) / 255;\n  } else {\n    return null;\n  }\n\n  const max = Math.max(r, g, b);\n  const min = Math.min(r, g, b);\n  let h = 0;\n  let s = 0;\n  const l = (max + min) / 2;\n\n  if (max !== min) {\n    const d = max - min;\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n\n    switch (max) {\n      case r:\n        h = (g - b) / d + (g < b ? 6 : 0);\n        break;\n      case g:\n        h = (b - r) / d + 2;\n        break;\n      case b:\n        h = (r - g) / d + 4;\n        break;\n    }\n\n    h /= 6;\n  }\n\n  const hDeg = Math.round(h * 360);\n  const sPct = Math.round(s * 100);\n  const lPct = Math.round(l * 100);\n\n  return `${hDeg} ${sPct}% ${lPct}%`;\n}\n\nexport interface ThemeVariables {\n  '--background'?: string;\n  '--foreground'?: string;\n  '--primary'?: string;\n  '--primary-foreground'?: string;\n  '--secondary'?: string;\n  '--secondary-foreground'?: string;\n  '--muted'?: string;\n  '--muted-foreground'?: string;\n  '--accent'?: string;\n  '--accent-foreground'?: string;\n  '--border'?: string;\n  '--radius'?: string;\n}\n\nimport { CalendarTheme } from '../types';\n\nexport function getThemeStyles(theme?: CalendarTheme): React.CSSProperties {\n  if (!theme) return {};\n\n  const styles: Record<string, string> = {};\n\n  // Handle Colors\n  if (theme.colors) {\n    const mappings: Record<string, keyof typeof theme.colors> = {\n      '--background': 'background',\n      '--foreground': 'foreground',\n      '--primary': 'primary',\n      '--secondary': 'secondary',\n      '--muted': 'muted',\n      '--accent': 'accent',\n      '--border': 'border',\n    };\n\n    Object.entries(mappings).forEach(([cssVar, themeKey]) => {\n      const colorValue = theme.colors?.[themeKey];\n      if (colorValue) {\n        const hsl = colorToHsl(colorValue);\n        if (hsl) {\n          styles[cssVar] = hsl;\n        }\n      }\n    });\n  }\n\n  // Handle Border Radius\n  if (theme.borderRadius) {\n    styles['--radius'] = theme.borderRadius;\n  }\n\n  // Handle Font Family\n  if (theme.fontFamily) {\n    styles['fontFamily'] = theme.fontFamily;\n  }\n\n  return styles as React.CSSProperties;\n}\n","import { useState } from 'react';\nimport {\n  addMonths,\n  subMonths,\n  addWeeks,\n  subWeeks,\n  addDays,\n  subDays,\n  differenceInMilliseconds,\n} from 'date-fns';\nimport { toZonedTime, fromZonedTime } from 'date-fns-tz';\nimport { DragEndEvent } from '@dnd-kit/core';\nimport { ViewType, CalendarEvent } from '../types';\nimport { isPastDate } from '../lib/date';\n\ninterface UseCalendarLogicProps {\n  events: CalendarEvent[];\n  view?: ViewType;\n  onViewChange?: (view: ViewType) => void;\n  date?: Date;\n  onDateChange?: (date: Date) => void;\n  onEventClick?: (event: CalendarEvent) => void;\n  onEventDrop?: (event: CalendarEvent, start: Date, end: Date) => void;\n  readOnly?: boolean;\n  timezone?: string;\n}\n\nexport const useCalendarLogic = ({\n  events,\n  view: controlledView,\n  onViewChange: controlledOnViewChange,\n  date: controlledDate,\n  onDateChange: controlledOnDateChange,\n  onEventClick,\n  onEventDrop,\n  readOnly,\n  timezone,\n}: UseCalendarLogicProps) => {\n  const [internalView, setInternalView] = useState<ViewType>('week');\n  const [internalDate, setInternalDate] = useState(new Date());\n  const [isSidebarOpen, setIsSidebarOpen] = useState(true);\n\n  // Modal state\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [selectedEvent, setSelectedEvent] = useState<CalendarEvent | null>(null);\n  const [modalInitialDate, setModalInitialDate] = useState<Date | undefined>(undefined);\n\n  const view = controlledView ?? internalView;\n  const currentDate = controlledDate ?? internalDate;\n\n  const handleViewChange = (newView: ViewType) => {\n    if (controlledOnViewChange) {\n      controlledOnViewChange(newView);\n    } else {\n      setInternalView(newView);\n    }\n  };\n\n  const handleDateChange = (newDate: Date) => {\n    if (controlledOnDateChange) {\n      controlledOnDateChange(newDate);\n    } else {\n      setInternalDate(newDate);\n    }\n  };\n\n  const handlePrev = () => {\n    switch (view) {\n      case 'month':\n        handleDateChange(subMonths(currentDate, 1));\n        break;\n      case 'week':\n        handleDateChange(subWeeks(currentDate, 1));\n        break;\n      case 'day':\n      case 'resource':\n        handleDateChange(subDays(currentDate, 1));\n        break;\n      case 'agenda':\n        handleDateChange(subDays(currentDate, 7));\n        break;\n    }\n  };\n\n  const handleNext = () => {\n    switch (view) {\n      case 'month':\n        handleDateChange(addMonths(currentDate, 1));\n        break;\n      case 'week':\n        handleDateChange(addWeeks(currentDate, 1));\n        break;\n      case 'day':\n      case 'resource':\n        handleDateChange(addDays(currentDate, 1));\n        break;\n      case 'agenda':\n        handleDateChange(addDays(currentDate, 7));\n        break;\n    }\n  };\n\n  const handleToday = () => {\n    handleDateChange(new Date());\n  };\n\n  const handleDateClick = (date: Date) => {\n    handleDateChange(date);\n    handleViewChange('day');\n  };\n\n  const handleTimeSlotClick = (date: Date) => {\n    if (readOnly) return;\n    setSelectedEvent(null);\n    setModalInitialDate(date);\n    setIsModalOpen(true);\n  };\n\n  const handleEventClickInternal = (event: CalendarEvent) => {\n    if (onEventClick) {\n      onEventClick(event);\n    }\n\n    if (!readOnly) {\n      setSelectedEvent(event);\n      setModalInitialDate(undefined);\n      setIsModalOpen(true);\n    }\n  };\n\n  const handleCreateEvent = () => {\n    if (readOnly) return;\n    setSelectedEvent(null);\n    setModalInitialDate(new Date());\n    setIsModalOpen(true);\n  };\n\n  const handleModalSave = () => {\n    // Placeholder - consumer should provide their own save logic via renderEventForm\n  };\n\n  const handleModalDelete = () => {\n    // Placeholder - consumer should provide their own delete logic via renderEventForm\n  };\n\n  const handleDragEnd = (event: DragEndEvent) => {\n    const { active, over } = event;\n\n    if (!over) return;\n\n    const activeEvent = active.data.current?.event as CalendarEvent;\n    const overDate = over.data.current?.date as Date;\n\n    if (!activeEvent || !overDate) return;\n\n    // Interdire le drop dans la zone passe (avant la date/heure actuelle)\n    if (isPastDate(overDate)) return;\n\n    const originalStart = new Date(activeEvent.start);\n    const originalEnd = new Date(activeEvent.end);\n    const duration = differenceInMilliseconds(originalEnd, originalStart);\n\n    let newStart: Date;\n\n    if (view === 'month') {\n      // For month view, overDate is the day cell\n      // We need to preserve the original time but change the date\n      if (timezone) {\n        // Get the original time in the target timezone\n        const zonedOriginal = toZonedTime(originalStart, timezone);\n        // Create new date with overDate's date but original's time\n        const zonedNew = new Date(overDate);\n        zonedNew.setHours(zonedOriginal.getHours());\n        zonedNew.setMinutes(zonedOriginal.getMinutes());\n        zonedNew.setSeconds(zonedOriginal.getSeconds());\n        zonedNew.setMilliseconds(zonedOriginal.getMilliseconds());\n        // Convert back from zoned time to UTC\n        newStart = fromZonedTime(zonedNew, timezone);\n      } else {\n        newStart = new Date(overDate);\n        newStart.setHours(originalStart.getHours());\n        newStart.setMinutes(originalStart.getMinutes());\n        newStart.setSeconds(originalStart.getSeconds());\n        newStart.setMilliseconds(originalStart.getMilliseconds());\n      }\n    } else {\n      // Week / Day / Resource View Logic\n      // overDate represents the time slot in \"display timezone\"\n      if (timezone) {\n        // overDate is already in the display timezone representation\n        // We need to convert it back to UTC for storage\n        // The cell date was created as local time representing the target timezone\n        newStart = fromZonedTime(overDate, timezone);\n      } else {\n        // No timezone set - use the date directly\n        newStart = new Date(overDate);\n      }\n\n      newStart.setSeconds(0);\n      newStart.setMilliseconds(0);\n    }\n\n    const newEnd = new Date(newStart.getTime() + duration);\n\n    // Resource Handling\n    let newResourceId = activeEvent.resourceId;\n    const overResourceId = over.data.current?.resourceId;\n    if (overResourceId) {\n      newResourceId = overResourceId;\n    }\n\n    // Check if event has actually changed\n    if (\n      newStart.getTime() === originalStart.getTime() &&\n      newEnd.getTime() === originalEnd.getTime() &&\n      newResourceId === activeEvent.resourceId\n    ) {\n      return;\n    }\n\n    // Call the callback with the updated event info\n    if (onEventDrop) {\n      onEventDrop(activeEvent, newStart, newEnd);\n    }\n  };\n\n  return {\n    view,\n    currentDate,\n    isSidebarOpen,\n    setIsSidebarOpen,\n    isModalOpen,\n    setIsModalOpen,\n    selectedEvent,\n    modalInitialDate,\n    events,\n    handleViewChange,\n    handleDateChange,\n    handlePrev,\n    handleNext,\n    handleToday,\n    handleDateClick,\n    handleTimeSlotClick,\n    handleEventClickInternal,\n    handleCreateEvent,\n    handleModalSave,\n    handleModalDelete,\n    handleDragEnd,\n  };\n};\n","import { useRef, useCallback, useEffect } from 'react';\n\ninterface SwipeGestureOptions {\n  onSwipeLeft?: () => void;\n  onSwipeRight?: () => void;\n  onSwipeUp?: () => void;\n  onSwipeDown?: () => void;\n  threshold?: number; // Minimum distance to trigger swipe\n  restraint?: number; // Maximum perpendicular distance\n  allowedTime?: number; // Maximum time allowed to complete swipe\n  enabled?: boolean;\n}\n\ninterface TouchInfo {\n  startX: number;\n  startY: number;\n  startTime: number;\n}\n\nexport const useSwipeGesture = <T extends HTMLElement>(options: SwipeGestureOptions) => {\n  const {\n    onSwipeLeft,\n    onSwipeRight,\n    onSwipeUp,\n    onSwipeDown,\n    threshold = 100,\n    restraint = 100,\n    allowedTime = 500,\n    enabled = true,\n  } = options;\n\n  const touchInfoRef = useRef<TouchInfo | null>(null);\n  const elementRef = useRef<T>(null);\n\n  const handleTouchStart = useCallback(\n    (e: TouchEvent) => {\n      if (!enabled) return;\n\n      const touch = e.touches[0];\n      touchInfoRef.current = {\n        startX: touch.clientX,\n        startY: touch.clientY,\n        startTime: Date.now(),\n      };\n    },\n    [enabled]\n  );\n\n  const handleTouchEnd = useCallback(\n    (e: TouchEvent) => {\n      if (!enabled || !touchInfoRef.current) return;\n\n      const touch = e.changedTouches[0];\n      const { startX, startY, startTime } = touchInfoRef.current;\n\n      const distX = touch.clientX - startX;\n      const distY = touch.clientY - startY;\n      const elapsedTime = Date.now() - startTime;\n\n      // Check if swipe was fast enough\n      if (elapsedTime <= allowedTime) {\n        // Horizontal swipe\n        if (Math.abs(distX) >= threshold && Math.abs(distY) <= restraint) {\n          if (distX > 0) {\n            onSwipeRight?.();\n          } else {\n            onSwipeLeft?.();\n          }\n        }\n        // Vertical swipe\n        else if (Math.abs(distY) >= threshold && Math.abs(distX) <= restraint) {\n          if (distY > 0) {\n            onSwipeDown?.();\n          } else {\n            onSwipeUp?.();\n          }\n        }\n      }\n\n      touchInfoRef.current = null;\n    },\n    [enabled, threshold, restraint, allowedTime, onSwipeLeft, onSwipeRight, onSwipeUp, onSwipeDown]\n  );\n\n  useEffect(() => {\n    const element = elementRef.current;\n    if (!element) return;\n\n    element.addEventListener('touchstart', handleTouchStart, { passive: true });\n    element.addEventListener('touchend', handleTouchEnd, { passive: true });\n\n    return () => {\n      element.removeEventListener('touchstart', handleTouchStart);\n      element.removeEventListener('touchend', handleTouchEnd);\n    };\n  }, [handleTouchStart, handleTouchEnd]);\n\n  return elementRef;\n};\n\n// Higher-order component for adding swipe to views\nexport const useViewSwipe = <T extends HTMLElement = HTMLElement>(\n  onPrev: () => void,\n  onNext: () => void,\n  enabled: boolean = true\n) => {\n  return useSwipeGesture<T>({\n    onSwipeLeft: onNext,\n    onSwipeRight: onPrev,\n    threshold: 50,\n    restraint: 100,\n    allowedTime: 300,\n    enabled,\n  });\n};\n","import React, { useId, useState, useMemo, useCallback } from 'react';\nimport {\n  DndContext,\n  useSensor,\n  useSensors,\n  PointerSensor,\n  Modifier,\n  DragOverlay,\n} from '@dnd-kit/core';\nimport { createSnapModifier, restrictToWindowEdges } from '@dnd-kit/modifiers';\nimport { AnimatePresence, motion } from 'framer-motion';\nimport { CalendarHeader } from './components/CalendarHeader';\nimport { Sidebar } from './components/Sidebar';\nimport { MonthView } from './views/MonthView';\nimport { WeekView } from './views/WeekView';\nimport { DayView } from './views/DayView';\nimport { AgendaView } from './views/AgendaView';\nimport { ResourceView } from './views/ResourceView';\nimport {\n  MonthViewSkeleton,\n  WeekViewSkeleton,\n  DayViewSkeleton,\n  AgendaViewSkeleton,\n} from './components/Skeleton';\nimport { EventContextMenu, useEventContextMenu } from './components/ContextMenu';\nimport { CalendarProps, CalendarEvent } from './types';\nimport { cn } from './utils';\nimport { getThemeStyles } from './lib/theme';\nimport { useCalendarLogic } from './hooks/useCalendarLogic';\nimport { differenceInMinutes, format } from 'date-fns';\nimport { toZonedTime } from 'date-fns-tz';\nimport { useViewSwipe } from './hooks/useSwipeGesture';\n\n// Re-export types for consumers\nexport type {\n  ViewType,\n  CalendarEvent,\n  CalendarProps,\n  CalendarTheme,\n  CalendarTranslations,\n  EventType,\n  Resource,\n  EventReminder,\n  EventAttachment,\n  ThemeColors,\n  SidebarConfig,\n  CalendarFilterItem,\n  CalendarFilterSection,\n} from './types';\n\n// Re-export utilities\nexport { cn } from './utils';\n\nexport const Scheduler: React.FC<CalendarProps> = ({\n  events = [],\n  view: controlledView,\n  onViewChange: controlledOnViewChange,\n  date: controlledDate,\n  onDateChange: controlledOnDateChange,\n  onEventClick,\n  onEventDrop,\n  timezone,\n  onTimezoneChange,\n  className,\n  theme,\n  readOnly,\n  calendars,\n  resources,\n  onCalendarToggle,\n  isLoading,\n  isDarkMode,\n  onThemeToggle,\n  showSidebar: controlledShowSidebar,\n  onSidebarToggle,\n  sidebarConfig,\n  translations,\n  hideViewSwitcher,\n  hideLanguageSelector,\n  hideDarkModeToggle,\n  language,\n  onLanguageChange,\n  locale, // Date-fns locale\n  newEventButton,\n}) => {\n  const [activeDragEvent, setActiveDragEvent] = useState<CalendarEvent | null>(null);\n\n  // Context menu state\n  const { contextMenuEvent, contextMenuPosition, closeContextMenu } = useEventContextMenu();\n\n  const {\n    view,\n    currentDate,\n    isSidebarOpen: internalSidebarOpen,\n    setIsSidebarOpen: setInternalSidebarOpen,\n    events: expandedEvents,\n    handleViewChange,\n    handleDateChange,\n    handlePrev,\n    handleNext,\n    handleToday,\n    handleDateClick,\n    handleTimeSlotClick,\n    handleEventClickInternal,\n    handleDragEnd,\n  } = useCalendarLogic({\n    events,\n    view: controlledView,\n    onViewChange: controlledOnViewChange,\n    date: controlledDate,\n    onDateChange: controlledOnDateChange,\n    onEventClick,\n    onEventDrop,\n    readOnly,\n    timezone,\n  });\n\n  // Sidebar: controlled or uncontrolled mode\n  // sidebarConfig.enabled controls whether sidebar feature is available (default: true)\n  // controlledShowSidebar or internalSidebarOpen controls whether it's currently visible\n  const sidebarFeatureEnabled = sidebarConfig?.enabled ?? true;\n  const sidebarVisible = controlledShowSidebar ?? internalSidebarOpen;\n  const sidebarEnabled = sidebarFeatureEnabled && sidebarVisible;\n\n  const handleSidebarToggle = useCallback(() => {\n    if (!sidebarFeatureEnabled) return; // Don't toggle if sidebar feature is disabled\n    const newValue = !sidebarVisible;\n    if (onSidebarToggle) {\n      onSidebarToggle(newValue);\n    } else {\n      setInternalSidebarOpen(newValue);\n    }\n  }, [sidebarFeatureEnabled, sidebarVisible, onSidebarToggle, setInternalSidebarOpen]);\n\n  // Sidebar section visibility (default: all visible)\n  const showMiniCalendar = sidebarConfig?.showMiniCalendar ?? true;\n  const showCalendarFilters = sidebarConfig?.showCalendarFilters ?? true;\n  const showTimezoneSelector = sidebarConfig?.showTimezoneSelector ?? true;\n\n  // DnD Sensors\n  const sensors = useSensors(\n    useSensor(PointerSensor, {\n      activationConstraint: {\n        distance: 8,\n      },\n    })\n  );\n\n  const gridSize = 15; // 15px snap (15 minutes if 60px/hr)\n  const snapToGrid = createSnapModifier(gridSize);\n  const modifiers: Modifier[] = [snapToGrid, restrictToWindowEdges];\n\n  // Disable DnD if readOnly\n  const dndSensors = readOnly ? [] : sensors;\n\n  const id = useId();\n\n  // Mobile swipe gesture support\n  const swipeRef = useViewSwipe<HTMLDivElement>(handlePrev, handleNext, true);\n\n  // Default Translations\n  const t = {\n    today: 'Today',\n    tomorrow: 'Tomorrow',\n    month: 'Month',\n    week: 'Week',\n    day: 'Day',\n    agenda: 'Agenda',\n    resource: 'Resource',\n    createEvent: 'Create Event',\n    editEvent: 'Edit Event',\n    delete: 'Delete',\n    save: 'Save',\n    cancel: 'Cancel',\n    title: 'Title',\n    start: 'Start',\n    end: 'End',\n    allDay: 'All Day',\n    description: 'Description',\n    repeat: 'Repeat',\n    noRepeat: 'Does not repeat',\n    selectCalendar: 'Select Calendar',\n    selectType: 'Select Type',\n    daily: 'Daily',\n    weekly: 'Weekly',\n    monthly: 'Monthly',\n    yearly: 'Yearly',\n    eventCount: 'event',\n    eventsCount: 'events',\n    guestCount: 'guest',\n    guestsCount: 'guests',\n    ...translations,\n  };\n\n  const handleDragStart = (event: { active: { id: string | number } }) => {\n    const { active } = event;\n    const draggedEvent = expandedEvents.find((e) => e.id === String(active.id));\n    if (draggedEvent) {\n      setActiveDragEvent(draggedEvent);\n    }\n  };\n\n  const onDragEndWrapper = (event: Parameters<typeof handleDragEnd>[0]) => {\n    setActiveDragEvent(null);\n    handleDragEnd(event);\n  };\n\n  // Calculate height for week/day view drag overlay\n  const getDragHeight = () => {\n    if (!activeDragEvent) return undefined;\n\n    if (view === 'resource') {\n      return 80; // Approximate height for resource view events\n    }\n\n    if (view !== 'week' && view !== 'day') return undefined;\n    const duration = differenceInMinutes(activeDragEvent.end, activeDragEvent.start);\n    // If DayView uses 80px, we should account for that.\n    // Current implementation: WeekView = 60px, DayView = 80px.\n    // But DayView uses 80px in DayView.tsx.\n    // Let's assume 60px for now as default or pass a prop.\n    // Or check view state.\n    const hourHeight = view === 'day' ? 80 : 60;\n    return (duration / 60) * hourHeight;\n  };\n\n  const getDragWidth = () => {\n    if (view === 'month') return '100%';\n\n    if (view === 'resource' && activeDragEvent) {\n      const duration = differenceInMinutes(activeDragEvent.end, activeDragEvent.start);\n      const width = (duration / 60) * 100; // 100px per hour in ResourceView\n      return `${Math.max(width, 4)}px`;\n    }\n\n    // For Week/Day views, use a fixed width that looks like a column\n    // Ideally we would measure the column width, but a fixed reasonable width works for the ghost\n    return '150px';\n  };\n\n  // Filter events based on active calendars (supports both formats)\n  const filteredEvents = useMemo(() => {\n    if (!calendars || calendars.length === 0) return expandedEvents;\n\n    let activeCalendarIds: string[];\n\n    // Check if using section format (has 'items' property)\n    if ('items' in calendars[0]) {\n      // New section format: flatten all items from all sections\n      const sections = calendars as { id: string; items: { id: string; active?: boolean }[] }[];\n      activeCalendarIds = sections\n        .flatMap((section) => section.items)\n        .filter((item) => item.active !== false)\n        .map((item) => item.id);\n    } else {\n      // Legacy flat array format\n      const items = calendars as { id: string; active?: boolean }[];\n      activeCalendarIds = items.filter((c) => c.active !== false).map((c) => c.id);\n    }\n\n    return expandedEvents.filter((e) => {\n      // If event has no calendarId, show it by default\n      if (!e.calendarId) return true;\n      return activeCalendarIds.includes(e.calendarId);\n    });\n  }, [expandedEvents, calendars]);\n\n  return (\n    <DndContext\n      id={id}\n      sensors={dndSensors}\n      onDragStart={handleDragStart}\n      onDragEnd={onDragEndWrapper}\n      modifiers={modifiers}\n    >\n      <div\n        className={cn('relative flex h-full space-x-4 bg-[#F9F9FB] text-foreground', className)}\n        style={getThemeStyles(theme)}\n      >\n        {/* Sidebar  gauche sur toute la hauteur */}\n        {sidebarEnabled && (\n          <div className=\"flex w-64 flex-shrink-0 px-4 py-4\">\n            <Sidebar\n              currentDate={currentDate}\n              onDateChange={handleDateChange}\n              onViewChange={handleViewChange}\n              timezone={timezone}\n              onTimezoneChange={onTimezoneChange}\n              className=\"h-full w-full\"\n              calendars={calendars}\n              onCalendarToggle={onCalendarToggle}\n              translations={t}\n              showMiniCalendar={showMiniCalendar}\n              showCalendarFilters={showCalendarFilters}\n              showTimezoneSelector={showTimezoneSelector}\n              locale={locale}\n            />\n          </div>\n        )}\n\n        {/* Bloc droit avec Header + Calendrier */}\n        <div className=\"flex flex-1 flex-col overflow-hidden\">\n          <CalendarHeader\n            currentDate={currentDate}\n            onPrev={handlePrev}\n            onNext={handleNext}\n            onToday={handleToday}\n            view={view}\n            onViewChange={handleViewChange}\n            onMenuClick={handleSidebarToggle}\n            isDarkMode={isDarkMode}\n            onThemeToggle={onThemeToggle}\n            translations={t}\n            hideViewSwitcher={hideViewSwitcher}\n            hideLanguageSelector={hideLanguageSelector}\n            hideDarkModeToggle={hideDarkModeToggle}\n            language={language}\n            onLanguageChange={onLanguageChange}\n            locale={locale}\n            newEventButton={newEventButton}\n          />\n\n          <div className=\"relative flex flex-1 flex-col overflow-hidden\">\n            {isLoading ? (\n              <div className=\"flex-1 overflow-auto p-0 md:p-4\">\n                <div className={cn('h-full', view !== 'agenda' && 'min-w-[max(100%,800px)]')}>\n                  {view === 'month' && <MonthViewSkeleton />}\n                  {view === 'week' && <WeekViewSkeleton />}\n                  {view === 'day' && <DayViewSkeleton />}\n                  {view === 'agenda' && <AgendaViewSkeleton />}\n                  {view === 'resource' && <WeekViewSkeleton />}\n                </div>\n              </div>\n            ) : (\n              <div ref={swipeRef} className=\"flex-1 touch-pan-y overflow-auto p-0 md:p-4\">\n                <div className={cn('h-full', view !== 'agenda' && 'min-w-[max(100%,800px)]')}>\n                  <AnimatePresence mode=\"wait\" initial={false}>\n                    <motion.div\n                      key={`${view}-${currentDate.toISOString()}-${timezone || 'local'}`}\n                      initial={{ opacity: 0, scale: 0.98, y: 15 }}\n                      animate={{\n                        opacity: 1,\n                        scale: 1,\n                        y: 0,\n                        transition: {\n                          duration: 0.25,\n                          ease: [0.25, 0.1, 0.25, 1],\n                        },\n                      }}\n                      exit={{\n                        opacity: 0,\n                        scale: 0.98,\n                        y: -10,\n                        transition: {\n                          duration: 0.15,\n                          ease: [0.25, 0.1, 0.25, 1],\n                        },\n                      }}\n                      className=\"h-full\"\n                    >\n                      {view === 'month' && (\n                        <MonthView\n                          currentDate={currentDate}\n                          events={filteredEvents}\n                          onEventClick={handleEventClickInternal}\n                          onDateClick={handleDateClick}\n                          timezone={timezone}\n                          locale={locale}\n                        />\n                      )}\n                      {view === 'week' && (\n                        <WeekView\n                          currentDate={currentDate}\n                          events={filteredEvents}\n                          onEventClick={handleEventClickInternal}\n                          onTimeSlotClick={handleTimeSlotClick}\n                          timezone={timezone}\n                          locale={locale}\n                          readonly={readOnly}\n                        />\n                      )}\n                      {view === 'day' && (\n                        <DayView\n                          currentDate={currentDate}\n                          events={filteredEvents}\n                          onEventClick={handleEventClickInternal}\n                          onTimeSlotClick={handleTimeSlotClick}\n                          timezone={timezone}\n                          locale={locale}\n                          readonly={readOnly}\n                          translations={{ today: t.today }}\n                        />\n                      )}\n                      {view === 'agenda' && (\n                        <AgendaView\n                          currentDate={currentDate}\n                          events={filteredEvents}\n                          onEventClick={handleEventClickInternal}\n                          locale={locale}\n                          translations={{\n                            today: t.today,\n                            tomorrow: t.tomorrow,\n                            allDay: t.allDay,\n                            eventCount: t.eventCount,\n                            eventsCount: t.eventsCount,\n                            guestCount: t.guestCount,\n                            guestsCount: t.guestsCount,\n                          }}\n                        />\n                      )}\n                      {view === 'resource' && resources && (\n                        <ResourceView\n                          currentDate={currentDate}\n                          events={filteredEvents}\n                          resources={resources}\n                          onEventClick={handleEventClickInternal}\n                          onTimeSlotClick={(date) => {\n                            if (readOnly) return;\n                            handleTimeSlotClick(date);\n                          }}\n                          locale={locale}\n                        />\n                      )}\n                    </motion.div>\n                  </AnimatePresence>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Context Menu */}\n        <EventContextMenu\n          event={contextMenuEvent}\n          position={contextMenuPosition}\n          onClose={closeContextMenu}\n          onEdit={(event) => {\n            handleEventClickInternal(event);\n            closeContextMenu();\n          }}\n          onDelete={() => {\n            closeContextMenu();\n          }}\n          onDuplicate={() => {\n            closeContextMenu();\n          }}\n          translations={{\n            edit: t.editEvent || 'Edit',\n            delete: t.delete || 'Delete',\n            duplicate: 'Duplicate',\n          }}\n        />\n\n        <DragOverlay dropAnimation={null}>\n          {activeDragEvent\n            ? (() => {\n                const dragHeight = getDragHeight();\n                const isShortEvent = dragHeight ? dragHeight <= 40 : false;\n                const eventTimeFormat = locale?.code === 'fr' ? 'H:mm' : 'h:mm a';\n                const zonedStart = timezone\n                  ? toZonedTime(activeDragEvent.start, timezone)\n                  : activeDragEvent.start;\n                const showDescription =\n                  activeDragEvent.description && !isShortEvent && dragHeight && dragHeight > 50;\n\n                // Determine padding and border style based on view\n                const isMonthView = view === 'month';\n                const padding = isShortEvent\n                  ? isMonthView\n                    ? 'px-2.5 py-1.5'\n                    : 'px-1'\n                  : view === 'day'\n                    ? 'px-3 py-2'\n                    : 'p-2';\n                const borderRadius = view === 'day' ? 'rounded-lg' : 'rounded-md';\n                const borderStyle = view === 'day' ? 'border-[0.5px]' : 'border';\n\n                return (\n                  <div\n                    className={cn(\n                      'cursor-grabbing overflow-hidden shadow-lg transition-transform',\n                      'glass backdrop-blur-sm',\n                      borderStyle,\n                      !activeDragEvent.color && 'border-primary/20 bg-primary/10',\n                      padding,\n                      borderRadius\n                    )}\n                    style={{\n                      backgroundColor: activeDragEvent.color\n                        ? `${activeDragEvent.color}15`\n                        : undefined,\n                      borderColor: activeDragEvent.color\n                        ? view === 'day'\n                          ? `${activeDragEvent.color}30`\n                          : `${activeDragEvent.color}40`\n                        : undefined,\n                      borderLeftWidth: '3px',\n                      borderLeftColor: activeDragEvent.color || '#141417',\n                      width: getDragWidth(),\n                      height: dragHeight ? `${dragHeight}px` : undefined,\n                      boxShadow: `0 10px 20px -5px ${activeDragEvent.color || 'var(--primary)'}20, 0 4px 8px -2px rgba(0,0,0,0.1)`,\n                      transform: 'rotate(-1deg) scale(1.01)',\n                    }}\n                  >\n                    <div className=\"flex h-full w-full flex-col overflow-hidden\">\n                      <div\n                        className={cn(\n                          'truncate font-semibold leading-tight',\n                          isShortEvent\n                            ? isMonthView\n                              ? 'text-xs'\n                              : 'text-center text-xs'\n                            : view === 'day'\n                              ? 'text-sm'\n                              : 'text-xs',\n                          activeDragEvent.color ? 'text-foreground' : 'text-foreground/90'\n                        )}\n                      >\n                        {activeDragEvent.title}\n                      </div>\n                      {!isShortEvent &&\n                        (view === 'week' || view === 'day' || view === 'resource') && (\n                          <div\n                            className={cn(\n                              'mt-0.5 truncate font-medium leading-tight text-muted-foreground',\n                              view === 'week' ? 'text-[10px]' : 'text-xs'\n                            )}\n                          >\n                            {format(zonedStart, eventTimeFormat, { locale })}\n                          </div>\n                        )}\n                      {showDescription && (\n                        <div\n                          className={cn(\n                            'mt-1 font-normal text-muted-foreground/80',\n                            view === 'week'\n                              ? 'truncate text-[10px]'\n                              : dragHeight && dragHeight > 60\n                                ? 'line-clamp-2 text-xs'\n                                : 'truncate text-xs'\n                          )}\n                        >\n                          {activeDragEvent.description}\n                        </div>\n                      )}\n                    </div>\n\n                    {/* Drag indicator */}\n                    <div className=\"absolute bottom-1.5 right-1.5 opacity-40\">\n                      <svg className=\"h-3.5 w-3.5\" viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                        <circle cx=\"9\" cy=\"5\" r=\"1.5\" />\n                        <circle cx=\"15\" cy=\"5\" r=\"1.5\" />\n                        <circle cx=\"9\" cy=\"12\" r=\"1.5\" />\n                        <circle cx=\"15\" cy=\"12\" r=\"1.5\" />\n                        <circle cx=\"9\" cy=\"19\" r=\"1.5\" />\n                        <circle cx=\"15\" cy=\"19\" r=\"1.5\" />\n                      </svg>\n                    </div>\n                  </div>\n                );\n              })()\n            : null}\n        </DragOverlay>\n      </div>\n    </DndContext>\n  );\n};\n"]}